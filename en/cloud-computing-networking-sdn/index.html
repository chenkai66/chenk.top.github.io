<!DOCTYPE html>



<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Chen Kai">
    
    <title>
        
            Cloud Computing (5): Network Architecture and SDN |
        
        Chen Kai Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"chenk.top","root":"/","language":"en","default_language":"zh-CN","languages":["zh-CN","en"],"path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.svg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":false},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Chen Kai Blog" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    
    
    
    
    

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/en/">
                Chen Kai Blog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/categories"
                            >
                                CATEGORIES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/tags"
                            >
                                TAGS
                            </a>
                        </li>
                    
                    <li class="menu-item lang-switch lang-switch-trigger" title="Language">
                        <i class="fas fa-globe"></i>
                    </li>
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item lang-switch-trigger"><i class="fas fa-globe"></i></div>
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/categories">CATEGORIES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/tags">TAGS</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    
    
    
    

    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Cloud Computing (5): Network Architecture and SDN</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Chen Kai</span>
                        
                            <span class="author-label">BOSS</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    
    
    
    
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2024-06-13 00:00:00</span>
        <span class="mobile">2024-06-13 00:00</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/en/categories/Cloud-Computing/">Cloud Computing</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/en/tags/SDN/">SDN</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/en/tags/VPC/">VPC</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/en/tags/Cloud-Computing/">Cloud Computing</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/en/tags/Cloud-Networking/">Cloud Networking</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/en/tags/Load-Balancing/">Load Balancing</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>8.1k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>50 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <p>Modern cloud applications don't exist in isolation—they're
interconnected systems spanning multiple regions, services, and users
worldwide. The network infrastructure that enables this connectivity is
arguably the most critical component of cloud computing. Without robust
networking, even the most powerful compute instances are isolated
islands, unable to communicate, scale, or serve users effectively.</p>
<p>Cloud networking has evolved far beyond simple IP connectivity.
Today's cloud networks are software-defined, programmable, and
intelligent. They automatically route traffic, balance loads, cache
content globally, encrypt data in transit, and adapt to changing
conditions—all while maintaining sub-millisecond latency and 99.99%
uptime.</p>
<p>In this comprehensive guide, we'll explore cloud networking from the
ground up: Virtual Private Clouds (VPCs) that provide isolated network
environments, load balancers that distribute traffic intelligently,
Content Delivery Networks (CDNs) that bring content closer to users,
Software-Defined Networking (SDN) that revolutionizes network control,
Network Functions Virtualization (NFV) that transforms network
appliances into software, and the security, monitoring, and
troubleshooting tools that keep everything running smoothly.</p>
<span id="more"></span>
<h2 id="virtual-private-cloud-vpc-fundamentals">Virtual Private Cloud
(VPC) Fundamentals</h2>
<h3 id="what-is-a-vpc">What is a VPC?</h3>
<p>A Virtual Private Cloud (VPC) is a logically isolated section of a
cloud provider's infrastructure where you can launch resources in a
virtual network that you define. Think of it as your own private data
center within the cloud, but with the flexibility and scalability that
cloud computing provides.</p>
<p><strong>Key Characteristics</strong>:</p>
<ul>
<li><strong>Isolation</strong>: Resources in your VPC are isolated from
other customers' resources</li>
<li><strong>Customizable</strong>: You control IP address ranges,
subnets, route tables, and gateways</li>
<li><strong>Secure</strong>: Multiple layers of security including
network ACLs and security groups</li>
<li><strong>Scalable</strong>: Automatically scales with your needs
without hardware changes</li>
<li><strong>Hybrid-ready</strong>: Can connect to on-premises data
centers via VPN or dedicated connections</li>
</ul>
<h3 id="vpc-architecture-components">VPC Architecture Components</h3>
<p>A typical VPC consists of several interconnected components:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────────┐</span><br><span class="line">│                    Internet Gateway                      │</span><br><span class="line">│                  (Public Internet Access)                │</span><br><span class="line">└───────────────────────┬───────────────────────────────────┘</span><br><span class="line">                       │</span><br><span class="line">┌───────────────────────▼───────────────────────────────────┐</span><br><span class="line">│                      VPC (10.0.0.0/16)                    │</span><br><span class="line">│                                                           │</span><br><span class="line">│  ┌────────────────────┐      ┌────────────────────┐      │</span><br><span class="line">│  │  Public Subnet     │      │  Private Subnet    │      │</span><br><span class="line">│  │  (10.0.1.0/24)     │      │  (10.0.2.0/24)     │      │</span><br><span class="line">│  │                    │      │                    │      │</span><br><span class="line">│  │  ┌──────────────┐  │      │  ┌──────────────┐  │      │</span><br><span class="line">│  │  │ Web Server   │  │      │  │ Database     │  │      │</span><br><span class="line">│  │  │ (Public IP)  │  │      │  │ (Private IP) │  │      │</span><br><span class="line">│  │  └──────────────┘  │      │  └──────────────┘  │      │</span><br><span class="line">│  └────────────────────┘      └────────────────────┘      │</span><br><span class="line">│                                                           │</span><br><span class="line">│  ┌──────────────────────────────────────────────────┐   │</span><br><span class="line">│  │         Route Tables                             │   │</span><br><span class="line">│  │  Public: 0.0.0.0/0 → Internet Gateway          │   │</span><br><span class="line">│  │  Private: 10.0.0.0/16 → Local                  │   │</span><br><span class="line">│  └──────────────────────────────────────────────────┘   │</span><br><span class="line">│                                                           │</span><br><span class="line">│  ┌──────────────────────────────────────────────────┐   │</span><br><span class="line">│  │         Security Groups &amp; Network ACLs           │   │</span><br><span class="line">│  └──────────────────────────────────────────────────┘   │</span><br><span class="line">└───────────────────────────────────────────────────────────┘</span><br><span class="line">                       │</span><br><span class="line">┌───────────────────────▼───────────────────────────────────┘</span><br><span class="line">│              VPN Gateway / Direct Connect                │</span><br><span class="line">│            (On-Premises Connectivity)                    │</span><br><span class="line">└───────────────────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>
<p><strong>Core Components</strong>:</p>
<ol type="1">
<li><p><strong>Subnets</strong>: Subdivisions of your VPC IP address
range. Typically organized as:</p>
<ul>
<li><strong>Public Subnets</strong>: Resources with direct internet
access via Internet Gateway</li>
<li><strong>Private Subnets</strong>: Resources without direct internet
access (more secure)</li>
<li><strong>Isolated Subnets</strong>: No internet access at all
(highest security)</li>
</ul></li>
<li><p><strong>Route Tables</strong>: Control traffic routing within and
outside the VPC</p>
<ul>
<li>Define how traffic flows between subnets</li>
<li>Specify routes to internet gateways, NAT gateways, VPN gateways</li>
</ul></li>
<li><p><strong>Internet Gateway</strong>: Provides public internet
access for resources in public subnets</p>
<ul>
<li>One per VPC</li>
<li>Enables bidirectional internet connectivity</li>
</ul></li>
<li><p><strong>NAT Gateway</strong>: Allows private subnet resources to
access the internet for outbound traffic</p>
<ul>
<li>Prevents inbound internet connections (more secure)</li>
<li>Managed service with high availability</li>
</ul></li>
<li><p><strong>Security Groups</strong>: Stateful virtual firewalls at
the instance level</p>
<ul>
<li>Act as allow lists (default deny)</li>
<li>Rules are evaluated for both inbound and outbound traffic</li>
</ul></li>
<li><p><strong>Network ACLs</strong>: Stateless subnet-level
firewalls</p>
<ul>
<li>Additional layer of security</li>
<li>Rules are evaluated separately for inbound and outbound traffic</li>
</ul></li>
</ol>
<h3 id="vpc-configuration-examples">VPC Configuration Examples</h3>
<p><strong>AWS VPC Configuration</strong>:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;VpcId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vpc-12345678&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;CidrBlock&quot;</span><span class="punctuation">:</span> <span class="string">&quot;10.0.0.0/16&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;State&quot;</span><span class="punctuation">:</span> <span class="string">&quot;available&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Tags&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Name&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;production-vpc&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p><strong>Terraform VPC Configuration</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"># VPC Definition</span><br><span class="line">resource &quot;aws_vpc&quot; &quot;main&quot; &#123;</span><br><span class="line">  cidr_block           = &quot;10.0.0.0/16&quot;</span><br><span class="line">  enable_dns_hostnames = true</span><br><span class="line">  enable_dns_support   = true</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;production-vpc&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Public Subnet</span><br><span class="line">resource &quot;aws_subnet&quot; &quot;public&quot; &#123;</span><br><span class="line">  vpc_id                  = aws_vpc.main.id</span><br><span class="line">  cidr_block              = &quot;10.0.1.0/24&quot;</span><br><span class="line">  availability_zone       = &quot;us-east-1a&quot;</span><br><span class="line">  map_public_ip_on_launch = true</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;public-subnet-1a&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Private Subnet</span><br><span class="line">resource &quot;aws_subnet&quot; &quot;private&quot; &#123;</span><br><span class="line">  vpc_id            = aws_vpc.main.id</span><br><span class="line">  cidr_block        = &quot;10.0.2.0/24&quot;</span><br><span class="line">  availability_zone = &quot;us-east-1a&quot;</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;private-subnet-1a&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Internet Gateway</span><br><span class="line">resource &quot;aws_internet_gateway&quot; &quot;main&quot; &#123;</span><br><span class="line">  vpc_id = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;main-igw&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Route Table for Public Subnet</span><br><span class="line">resource &quot;aws_route_table&quot; &quot;public&quot; &#123;</span><br><span class="line">  vpc_id = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  route &#123;</span><br><span class="line">    cidr_block = &quot;0.0.0.0/0&quot;</span><br><span class="line">    gateway_id = aws_internet_gateway.main.id</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;public-route-table&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Associate Public Subnet with Route Table</span><br><span class="line">resource &quot;aws_route_table_association&quot; &quot;public&quot; &#123;</span><br><span class="line">  subnet_id      = aws_subnet.public.id</span><br><span class="line">  route_table_id = aws_route_table.public.id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># NAT Gateway (for private subnet internet access)</span><br><span class="line">resource &quot;aws_eip&quot; &quot;nat&quot; &#123;</span><br><span class="line">  domain = &quot;vpc&quot;</span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;nat-gateway-eip&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_nat_gateway&quot; &quot;main&quot; &#123;</span><br><span class="line">  allocation_id = aws_eip.nat.id</span><br><span class="line">  subnet_id     = aws_subnet.public.id</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;main-nat-gateway&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Route Table for Private Subnet</span><br><span class="line">resource &quot;aws_route_table&quot; &quot;private&quot; &#123;</span><br><span class="line">  vpc_id = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  route &#123;</span><br><span class="line">    cidr_block     = &quot;0.0.0.0/0&quot;</span><br><span class="line">    nat_gateway_id = aws_nat_gateway.main.id</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;private-route-table&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Associate Private Subnet with Route Table</span><br><span class="line">resource &quot;aws_route_table_association&quot; &quot;private&quot; &#123;</span><br><span class="line">  subnet_id      = aws_subnet.private.id</span><br><span class="line">  route_table_id = aws_route_table.private.id</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Google Cloud VPC Configuration</strong>:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gcloud command to create VPC</span></span><br><span class="line"><span class="string">gcloud</span> <span class="string">compute</span> <span class="string">networks</span> <span class="string">create</span> <span class="string">production-vpc</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--subnet-mode=custom</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--bgp-routing-mode=regional</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create subnets</span></span><br><span class="line"><span class="string">gcloud</span> <span class="string">compute</span> <span class="string">networks</span> <span class="string">subnets</span> <span class="string">create</span> <span class="string">public-subnet</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--network=production-vpc</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--range=10.0.1.0/24</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--region=us-east1</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--enable-flow-logs</span></span><br><span class="line"></span><br><span class="line"><span class="string">gcloud</span> <span class="string">compute</span> <span class="string">networks</span> <span class="string">subnets</span> <span class="string">create</span> <span class="string">private-subnet</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--network=production-vpc</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--range=10.0.2.0/24</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--region=us-east1</span> <span class="string">\</span></span><br><span class="line">  <span class="string">--private-ip-google-access</span></span><br></pre></td></tr></table></figure>
<h3 id="vpc-peering-and-connectivity">VPC Peering and Connectivity</h3>
<p><strong>VPC Peering</strong>: Connect two VPCs to enable resources to
communicate using private IP addresses.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">VPC A (10.0.0.0/16)          VPC B (172.16.0.0/16)</span><br><span class="line">┌──────────────┐             ┌──────────────┐</span><br><span class="line">│              │             │              │</span><br><span class="line">│  Instance 1  │◄───────────►│  Instance 2  │</span><br><span class="line">│  10.0.1.10   │   Peering   │  172.16.1.20 │</span><br><span class="line">│              │   Connection │              │</span><br><span class="line">└──────────────┘             └──────────────┘</span><br></pre></td></tr></table></figure>
<p><strong>Peering Configuration</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># VPC Peering Connection</span><br><span class="line">resource &quot;aws_vpc_peering_connection&quot; &quot;main&quot; &#123;</span><br><span class="line">  vpc_id      = aws_vpc.vpc_a.id</span><br><span class="line">  peer_vpc_id = aws_vpc.vpc_b.id</span><br><span class="line">  auto_accept = true</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;vpc-a-to-vpc-b&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Route in VPC A to reach VPC B</span><br><span class="line">resource &quot;aws_route&quot; &quot;vpc_a_to_vpc_b&quot; &#123;</span><br><span class="line">  route_table_id            = aws_route_table.vpc_a.id</span><br><span class="line">  destination_cidr_block    = &quot;172.16.0.0/16&quot;</span><br><span class="line">  vpc_peering_connection_id = aws_vpc_peering_connection.main.id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Route in VPC B to reach VPC A</span><br><span class="line">resource &quot;aws_route&quot; &quot;vpc_b_to_vpc_a&quot; &#123;</span><br><span class="line">  route_table_id            = aws_route_table.vpc_b.id</span><br><span class="line">  destination_cidr_block    = &quot;10.0.0.0/16&quot;</span><br><span class="line">  vpc_peering_connection_id = aws_vpc_peering_connection.main.id</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="load-balancing-slb-elb-and-alb">Load Balancing: SLB, ELB, and
ALB</h2>
<p>Load balancing is the process of distributing incoming network
traffic across multiple backend servers to ensure no single server
becomes overwhelmed, improving application availability and
responsiveness.</p>
<h3 id="load-balancer-types">Load Balancer Types</h3>
<p><strong>1. Network Load Balancer (Layer 4 - TCP/UDP)</strong></p>
<p>Operates at the transport layer, routing traffic based on IP
addresses and ports.</p>
<p><strong>Characteristics</strong>:</p>
<ul>
<li>Ultra-low latency (&lt;100ms)</li>
<li>Handles millions of requests per second</li>
<li>Preserves source IP address</li>
<li>Best for TCP/UDP traffic</li>
<li>Connection-based routing</li>
</ul>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>High-performance applications requiring low latency</li>
<li>TCP/UDP-based protocols</li>
<li>Gaming applications</li>
<li>IoT device communication</li>
</ul>
<p><strong>AWS Network Load Balancer Configuration</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">resource &quot;aws_lb&quot; &quot;network&quot; &#123;</span><br><span class="line">  name               = &quot;network-lb&quot;</span><br><span class="line">  internal           = false</span><br><span class="line">  load_balancer_type = &quot;network&quot;</span><br><span class="line">  subnets            = [aws_subnet.public.*.id]</span><br><span class="line"></span><br><span class="line">  enable_deletion_protection = false</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Environment = &quot;production&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_lb_target_group&quot; &quot;network&quot; &#123;</span><br><span class="line">  name     = &quot;network-tg&quot;</span><br><span class="line">  port     = 80</span><br><span class="line">  protocol = &quot;TCP&quot;</span><br><span class="line">  vpc_id   = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  health_check &#123;</span><br><span class="line">    protocol            = &quot;TCP&quot;</span><br><span class="line">    port                = 80</span><br><span class="line">    healthy_threshold   = 2</span><br><span class="line">    unhealthy_threshold = 2</span><br><span class="line">    interval            = 30</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_lb_listener&quot; &quot;network&quot; &#123;</span><br><span class="line">  load_balancer_arn = aws_lb.network.arn</span><br><span class="line">  port              = &quot;80&quot;</span><br><span class="line">  protocol          = &quot;TCP&quot;</span><br><span class="line"></span><br><span class="line">  default_action &#123;</span><br><span class="line">    type             = &quot;forward&quot;</span><br><span class="line">    target_group_arn = aws_lb_target_group.network.arn</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2. Application Load Balancer (Layer 7 -
HTTP/HTTPS)</strong></p>
<p>Operates at the application layer, making routing decisions based on
content.</p>
<p><strong>Characteristics</strong>:</p>
<ul>
<li>Content-based routing (path, host, headers)</li>
<li>SSL/TLS termination</li>
<li>Advanced request routing</li>
<li>WebSocket and HTTP/2 support</li>
<li>Best for HTTP/HTTPS traffic</li>
</ul>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Web applications</li>
<li>Microservices architectures</li>
<li>Container-based applications</li>
<li>API gateways</li>
</ul>
<p><strong>AWS Application Load Balancer Configuration</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">resource &quot;aws_lb&quot; &quot;application&quot; &#123;</span><br><span class="line">  name               = &quot;application-lb&quot;</span><br><span class="line">  internal           = false</span><br><span class="line">  load_balancer_type = &quot;application&quot;</span><br><span class="line">  security_groups    = [aws_security_group.lb.id]</span><br><span class="line">  subnets            = [aws_subnet.public.*.id]</span><br><span class="line"></span><br><span class="line">  enable_deletion_protection = false</span><br><span class="line">  enable_http2               = true</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Environment = &quot;production&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_lb_target_group&quot; &quot;web&quot; &#123;</span><br><span class="line">  name     = &quot;web-tg&quot;</span><br><span class="line">  port     = 80</span><br><span class="line">  protocol = &quot;HTTP&quot;</span><br><span class="line">  vpc_id   = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  health_check &#123;</span><br><span class="line">    enabled             = true</span><br><span class="line">    healthy_threshold   = 2</span><br><span class="line">    unhealthy_threshold = 2</span><br><span class="line">    timeout             = 5</span><br><span class="line">    interval            = 30</span><br><span class="line">    path                = &quot;/health&quot;</span><br><span class="line">    matcher             = &quot;200&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  stickiness &#123;</span><br><span class="line">    type            = &quot;lb_cookie&quot;</span><br><span class="line">    cookie_duration = 86400</span><br><span class="line">    enabled         = true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_lb_target_group&quot; &quot;api&quot; &#123;</span><br><span class="line">  name     = &quot;api-tg&quot;</span><br><span class="line">  port     = 8080</span><br><span class="line">  protocol = &quot;HTTP&quot;</span><br><span class="line">  vpc_id   = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  health_check &#123;</span><br><span class="line">    enabled             = true</span><br><span class="line">    healthy_threshold   = 2</span><br><span class="line">    unhealthy_threshold = 2</span><br><span class="line">    timeout             = 5</span><br><span class="line">    interval            = 30</span><br><span class="line">    path                = &quot;/api/health&quot;</span><br><span class="line">    matcher             = &quot;200&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_lb_listener&quot; &quot;https&quot; &#123;</span><br><span class="line">  load_balancer_arn = aws_lb.application.arn</span><br><span class="line">  port              = &quot;443&quot;</span><br><span class="line">  protocol          = &quot;HTTPS&quot;</span><br><span class="line">  ssl_policy        = &quot;ELBSecurityPolicy-TLS-1-2-2017-01&quot;</span><br><span class="line">  certificate_arn   = aws_acm_certificate.main.arn</span><br><span class="line"></span><br><span class="line">  default_action &#123;</span><br><span class="line">    type             = &quot;forward&quot;</span><br><span class="line">    target_group_arn = aws_lb_target_group.web.arn</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Path-based routing</span><br><span class="line">resource &quot;aws_lb_listener_rule&quot; &quot;api&quot; &#123;</span><br><span class="line">  listener_arn = aws_lb_listener.https.arn</span><br><span class="line">  priority     = 100</span><br><span class="line"></span><br><span class="line">  action &#123;</span><br><span class="line">    type             = &quot;forward&quot;</span><br><span class="line">    target_group_arn = aws_lb_target_group.api.arn</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  condition &#123;</span><br><span class="line">    path_pattern &#123;</span><br><span class="line">      values = [&quot;/api/*&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Host-based routing</span><br><span class="line">resource &quot;aws_lb_listener_rule&quot; &quot;admin&quot; &#123;</span><br><span class="line">  listener_arn = aws_lb_listener.https.arn</span><br><span class="line">  priority     = 200</span><br><span class="line"></span><br><span class="line">  action &#123;</span><br><span class="line">    type             = &quot;forward&quot;</span><br><span class="line">    target_group_arn = aws_lb_target_group.admin.arn</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  condition &#123;</span><br><span class="line">    host_header &#123;</span><br><span class="line">      values = [&quot;admin.example.com&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3. Classic Load Balancer (Legacy)</strong></p>
<p>Older generation load balancer, being phased out in favor of ALB and
NLB.</p>
<h3 id="load-balancing-algorithms">Load Balancing Algorithms</h3>
<p><strong>1. Round Robin</strong>: Distributes requests sequentially
across servers <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Request 1 → Server A</span><br><span class="line">Request 2 → Server B</span><br><span class="line">Request 3 → Server C</span><br><span class="line">Request 4 → Server A (cycle repeats)</span><br></pre></td></tr></table></figure></p>
<p><strong>2. Least Connections</strong>: Routes to server with fewest
active connections <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Server A: 5 connections</span><br><span class="line">Server B: 3 connections ← Selected</span><br><span class="line">Server C: 7 connections</span><br></pre></td></tr></table></figure></p>
<p><strong>3. Weighted Round Robin</strong>: Round robin with server
capacity weights <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Server A (weight: 3) → 3 requests</span><br><span class="line">Server B (weight: 1) → 1 request</span><br><span class="line">Server C (weight: 2) → 2 requests</span><br></pre></td></tr></table></figure></p>
<p><strong>4. IP Hash</strong>: Routes based on client IP hash (session
persistence) <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Client IP: 192.168.1.100 → Hash → Server B (always)</span><br></pre></td></tr></table></figure></p>
<p><strong>5. Least Response Time</strong>: Routes to server with lowest
response time <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Server A: 50ms response time ← Selected</span><br><span class="line">Server B: 120ms response time</span><br><span class="line">Server C: 80ms response time</span><br></pre></td></tr></table></figure></p>
<h3 id="load-balancer-health-checks">Load Balancer Health Checks</h3>
<p>Health checks ensure traffic only goes to healthy backend
servers.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">resource &quot;aws_lb_target_group&quot; &quot;app&quot; &#123;</span><br><span class="line">  name     = &quot;app-tg&quot;</span><br><span class="line">  port     = 80</span><br><span class="line">  protocol = &quot;HTTP&quot;</span><br><span class="line">  vpc_id   = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  health_check &#123;</span><br><span class="line">    enabled             = true</span><br><span class="line">    healthy_threshold   = 2      # Consecutive successes needed</span><br><span class="line">    unhealthy_threshold = 3      # Consecutive failures to mark unhealthy</span><br><span class="line">    timeout             = 5      # Timeout in seconds</span><br><span class="line">    interval            = 30     # Check interval in seconds</span><br><span class="line">    path                = &quot;/health&quot;</span><br><span class="line">    protocol            = &quot;HTTP&quot;</span><br><span class="line">    matcher             = &quot;200&quot;  # HTTP status codes considered healthy</span><br><span class="line">    port                = &quot;traffic-port&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Health Check Best Practices</strong>:</p>
<ul>
<li>Use dedicated health check endpoints (<code>/health</code>,
<code>/ready</code>)</li>
<li>Keep health checks lightweight (avoid database queries)</li>
<li>Set appropriate thresholds (2-3 healthy, 2-3 unhealthy)</li>
<li>Use different endpoints for liveness vs readiness (Kubernetes)</li>
<li>Monitor health check metrics to detect issues early</li>
</ul>
<h3 id="load-balancer-performance-benchmarks">Load Balancer Performance
Benchmarks</h3>
<p><strong>Throughput Comparison</strong>:</p>
<table>
<thead>
<tr>
<th>Load Balancer Type</th>
<th>Max Throughput</th>
<th>Latency</th>
<th>Connections/sec</th>
</tr>
</thead>
<tbody>
<tr>
<td>Network LB</td>
<td>100+ Gbps</td>
<td>&lt;100ms</td>
<td>Millions</td>
</tr>
<tr>
<td>Application LB</td>
<td>10+ Gbps</td>
<td>&lt;400ms</td>
<td>Hundreds of K</td>
</tr>
<tr>
<td>Classic LB</td>
<td>5 Gbps</td>
<td>&lt;500ms</td>
<td>Tens of K</td>
</tr>
</tbody>
</table>
<p><strong>Traffic Analysis Example</strong>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Simulating load balancer traffic distribution</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> statistics</span><br><span class="line"></span><br><span class="line">servers = [<span class="string">&#x27;Server-A&#x27;</span>, <span class="string">&#x27;Server-B&#x27;</span>, <span class="string">&#x27;Server-C&#x27;</span>]</span><br><span class="line">server_weights = &#123;<span class="string">&#x27;Server-A&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;Server-B&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;Server-C&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line">request_count = &#123;<span class="string">&#x27;Server-A&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;Server-B&#x27;</span>: <span class="number">0</span>, <span class="string">&#x27;Server-C&#x27;</span>: <span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Weighted round robin simulation</span></span><br><span class="line">total_weight = <span class="built_in">sum</span>(server_weights.values())</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>):</span><br><span class="line">    rand = random.uniform(<span class="number">0</span>, total_weight)</span><br><span class="line">    cumulative = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> server, weight <span class="keyword">in</span> server_weights.items():</span><br><span class="line">        cumulative += weight</span><br><span class="line">        <span class="keyword">if</span> rand &lt;= cumulative:</span><br><span class="line">            request_count[server] += <span class="number">1</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Request Distribution:&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> server, count <span class="keyword">in</span> request_count.items():</span><br><span class="line">    percentage = (count / <span class="number">1000</span>) * <span class="number">100</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;server&#125;</span>: <span class="subst">&#123;count&#125;</span> requests (<span class="subst">&#123;percentage:<span class="number">.1</span>f&#125;</span>%)&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>Expected Output</strong>: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Request Distribution:</span><br><span class="line">Server-A: 500 requests (50.0%)</span><br><span class="line">Server-B: 167 requests (16.7%)</span><br><span class="line">Server-C: 333 requests (33.3%)</span><br></pre></td></tr></table></figure></p>
<h2 id="content-delivery-networks-cdn">Content Delivery Networks
(CDN)</h2>
<p>A Content Delivery Network (CDN) is a geographically distributed
network of servers that cache content closer to end users, reducing
latency and improving performance.</p>
<h3 id="how-cdns-work">How CDNs Work</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">User Request Flow:</span><br><span class="line">┌─────────┐</span><br><span class="line">│  User   │</span><br><span class="line">│ (Tokyo) │</span><br><span class="line">└────┬────┘</span><br><span class="line">     │ 1. Request for example.com/image.jpg</span><br><span class="line">     ▼</span><br><span class="line">┌─────────────────┐</span><br><span class="line">│  DNS Resolver   │</span><br><span class="line">└────┬────────────┘</span><br><span class="line">     │ 2. Query CDN DNS</span><br><span class="line">     ▼</span><br><span class="line">┌─────────────────┐</span><br><span class="line">│  CDN Edge       │  ← Closest to user (Tokyo)</span><br><span class="line">│  Server (Cache) │</span><br><span class="line">└────┬────────────┘</span><br><span class="line">     │ 3. Cache HIT → Return cached content</span><br><span class="line">     │    Cache MISS → Forward to origin</span><br><span class="line">     ▼</span><br><span class="line">┌─────────────────┐</span><br><span class="line">│  Origin Server  │</span><br><span class="line">│  (US-East)      │</span><br><span class="line">└─────────────────┘</span><br></pre></td></tr></table></figure>
<h3 id="cdn-architecture">CDN Architecture</h3>
<p><strong>Edge Locations</strong>: Servers distributed globally,
typically in major cities</p>
<ul>
<li>Cache frequently accessed content</li>
<li>Serve content with lowest latency</li>
<li>Reduce load on origin servers</li>
</ul>
<p><strong>Origin Server</strong>: Original source of content</p>
<ul>
<li>Serves content when cache misses occur</li>
<li>Can be cloud storage (S3, GCS) or web servers</li>
</ul>
<p><strong>CDN Features</strong>:</p>
<ol type="1">
<li><strong>Caching</strong>: Stores content at edge locations</li>
<li><strong>Compression</strong>: Gzip/Brotli compression to reduce
bandwidth</li>
<li><strong>SSL/TLS</strong>: HTTPS termination at edge</li>
<li><strong>DDoS Protection</strong>: Absorbs attack traffic</li>
<li><strong>Geographic Routing</strong>: Routes to nearest edge
location</li>
</ol>
<h3 id="cdn-configuration-examples">CDN Configuration Examples</h3>
<p><strong>AWS CloudFront Configuration</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">resource &quot;aws_cloudfront_distribution&quot; &quot;main&quot; &#123;</span><br><span class="line">  origin &#123;</span><br><span class="line">    domain_name = aws_s3_bucket.website.bucket_regional_domain_name</span><br><span class="line">    origin_id   = &quot;S3-$&#123;aws_s3_bucket.website.bucket&#125;&quot;</span><br><span class="line"></span><br><span class="line">    s3_origin_config &#123;</span><br><span class="line">      origin_access_identity = aws_cloudfront_origin_access_identity.main.cloudfront_access_identity_path</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  enabled             = true</span><br><span class="line">  is_ipv6_enabled     = true</span><br><span class="line">  comment             = &quot;Production CDN distribution&quot;</span><br><span class="line">  default_root_object = &quot;index.html&quot;</span><br><span class="line"></span><br><span class="line">  default_cache_behavior &#123;</span><br><span class="line">    allowed_methods  = [&quot;DELETE&quot;, &quot;GET&quot;, &quot;HEAD&quot;, &quot;OPTIONS&quot;, &quot;PATCH&quot;, &quot;POST&quot;, &quot;PUT&quot;]</span><br><span class="line">    cached_methods   = [&quot;GET&quot;, &quot;HEAD&quot;]</span><br><span class="line">    target_origin_id = &quot;S3-$&#123;aws_s3_bucket.website.bucket&#125;&quot;</span><br><span class="line"></span><br><span class="line">    forwarded_values &#123;</span><br><span class="line">      query_string = false</span><br><span class="line">      cookies &#123;</span><br><span class="line">        forward = &quot;none&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    viewer_protocol_policy = &quot;redirect-to-https&quot;</span><br><span class="line">    min_ttl                = 0</span><br><span class="line">    default_ttl            = 3600</span><br><span class="line">    max_ttl                = 86400</span><br><span class="line">    compress               = true</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Cache behavior for images</span><br><span class="line">  ordered_cache_behavior &#123;</span><br><span class="line">    path_pattern     = &quot;/images/*&quot;</span><br><span class="line">    allowed_methods  = [&quot;GET&quot;, &quot;HEAD&quot;]</span><br><span class="line">    cached_methods   = [&quot;GET&quot;, &quot;HEAD&quot;]</span><br><span class="line">    target_origin_id = &quot;S3-$&#123;aws_s3_bucket.website.bucket&#125;&quot;</span><br><span class="line"></span><br><span class="line">    forwarded_values &#123;</span><br><span class="line">      query_string = false</span><br><span class="line">      headers      = [&quot;Origin&quot;]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    min_ttl                = 0</span><br><span class="line">    default_ttl            = 86400  # 24 hours</span><br><span class="line">    max_ttl                = 31536000  # 1 year</span><br><span class="line">    compress               = true</span><br><span class="line">    viewer_protocol_policy = &quot;redirect-to-https&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  restrictions &#123;</span><br><span class="line">    geo_restriction &#123;</span><br><span class="line">      restriction_type = &quot;whitelist&quot;</span><br><span class="line">      locations        = [&quot;US&quot;, &quot;CA&quot;, &quot;GB&quot;, &quot;DE&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  viewer_certificate &#123;</span><br><span class="line">    cloudfront_default_certificate = true</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  custom_error_response &#123;</span><br><span class="line">    error_code         = 404</span><br><span class="line">    response_code      = 200</span><br><span class="line">    response_page_path = &quot;/index.html&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Cache Headers Configuration</strong>:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Origin server configuration for optimal CDN caching</span></span><br><span class="line"><span class="section">location</span> <span class="regexp">~* \.(jpg|jpeg|png|gif|ico|css|js)$</span> &#123;</span><br><span class="line">    <span class="attribute">expires</span> <span class="number">1y</span>;</span><br><span class="line">    <span class="attribute">add_header</span> Cache-Control <span class="string">&quot;public, immutable&quot;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> Vary <span class="string">&quot;Accept-Encoding&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> /api/ &#123;</span><br><span class="line">    <span class="attribute">add_header</span> Cache-Control <span class="string">&quot;no-cache, no-store, must-revalidate&quot;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> Pragma <span class="string">&quot;no-cache&quot;</span>;</span><br><span class="line">    <span class="attribute">add_header</span> Expires <span class="string">&quot;0&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="cdn-performance-metrics">CDN Performance Metrics</h3>
<p><strong>Key Metrics</strong>:</p>
<ul>
<li><strong>Cache Hit Ratio</strong>: Percentage of requests served from
cache
<ul>
<li>Target: &gt;90% for static content</li>
<li>Formula: (Cache Hits / Total Requests) × 100</li>
</ul></li>
<li><strong>Latency</strong>: Time from request to first byte
<ul>
<li>Edge cache: &lt;50ms</li>
<li>Origin fetch: 100-500ms (depending on distance)</li>
</ul></li>
<li><strong>Bandwidth Savings</strong>: Data not transferred from origin
<ul>
<li>Formula: (Origin Bandwidth - CDN Bandwidth) / Origin Bandwidth ×
100</li>
</ul></li>
</ul>
<p><strong>Performance Comparison</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Without CDN:</span><br><span class="line">User (Tokyo) → Origin (US-East): 200ms latency, 1.0 Gbps bandwidth</span><br><span class="line"></span><br><span class="line">With CDN:</span><br><span class="line">User (Tokyo) → Edge (Tokyo): 20ms latency, 0.1 Gbps bandwidth (90% cache hit)</span><br><span class="line">User (Tokyo) → Edge (Tokyo) → Origin (US-East): 220ms latency, 0.1 Gbps bandwidth (10% cache miss)</span><br><span class="line"></span><br><span class="line">Overall Improvement:</span><br><span class="line"></span><br><span class="line">- Average Latency: 200ms → 40ms (80% reduction)</span><br><span class="line">- Bandwidth: 1.0 Gbps → 0.1 Gbps (90% reduction)</span><br></pre></td></tr></table></figure>
<h2 id="software-defined-networking-sdn">Software-Defined Networking
(SDN)</h2>
<p>Software-Defined Networking (SDN) is an architecture that separates
the network control plane from the data plane, enabling centralized
network management and programmability.</p>
<h3 id="traditional-networking-vs-sdn">Traditional Networking vs
SDN</h3>
<p><strong>Traditional Networking</strong>: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────┐     ┌─────────────┐     ┌─────────────┐</span><br><span class="line">│   Switch 1  │────▶│   Switch 2  │────▶│   Switch 3  │</span><br><span class="line">│             │     │             │     │             │</span><br><span class="line">│ Control +   │     │ Control +   │     │ Control +   │</span><br><span class="line">│ Data Plane  │     │ Data Plane  │     │ Data Plane  │</span><br><span class="line">└─────────────┘     └─────────────┘     └─────────────┘</span><br><span class="line">     │                    │                    │</span><br><span class="line">     └────────────────────┴────────────────────┘</span><br><span class="line">              (Distributed Control)</span><br></pre></td></tr></table></figure></p>
<p><strong>SDN Architecture</strong>: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────┐</span><br><span class="line">│         SDN Controller                  │</span><br><span class="line">│      (Centralized Control Plane)        │</span><br><span class="line">│                                         │</span><br><span class="line">│  - Network Topology Management         │</span><br><span class="line">│  - Flow Rule Programming               │</span><br><span class="line">│  - Policy Enforcement                  │</span><br><span class="line">└───────────────┬─────────────────────────┘</span><br><span class="line">                │</span><br><span class="line">    ┌───────────┼───────────┐</span><br><span class="line">    │           │           │</span><br><span class="line">┌───▼───┐   ┌───▼───┐   ┌───▼───┐</span><br><span class="line">│Switch │   │Switch │   │Switch │</span><br><span class="line">│   1   │   │   2   │   │   3   │</span><br><span class="line">│       │   │       │   │       │</span><br><span class="line">│ Data  │   │ Data  │   │ Data  │</span><br><span class="line">│ Plane │   │ Plane │   │ Plane │</span><br><span class="line">└───────┘   └───────┘   └───────┘</span><br></pre></td></tr></table></figure></p>
<h3 id="sdn-architecture-components">SDN Architecture Components</h3>
<p><strong>1. Control Plane</strong>: Centralized controller that
manages network behavior</p>
<ul>
<li>Network topology discovery</li>
<li>Flow rule computation</li>
<li>Policy enforcement</li>
<li>Network state management</li>
</ul>
<p><strong>2. Data Plane</strong>: Network devices (switches, routers)
that forward packets</p>
<ul>
<li>Forward packets based on flow tables</li>
<li>Report statistics to controller</li>
<li>Execute forwarding rules</li>
</ul>
<p><strong>3. Southbound API</strong>: Communication protocol between
controller and switches</p>
<ul>
<li>OpenFlow (most common)</li>
<li>NETCONF</li>
<li>P4 Runtime</li>
</ul>
<p><strong>4. Northbound API</strong>: Interface for applications to
interact with controller</p>
<ul>
<li>REST APIs</li>
<li>Python SDKs</li>
<li>Network management applications</li>
</ul>
<h3 id="openflow-protocol">OpenFlow Protocol</h3>
<p>OpenFlow is the most widely adopted SDN protocol, defining the
communication between controllers and switches.</p>
<p><strong>OpenFlow Flow Table Structure</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">┌─────────────────────────────────────────────────────┐</span><br><span class="line">│                    Flow Table                      │</span><br><span class="line">├──────────┬──────────┬──────────┬──────────┬────────┤</span><br><span class="line">│ Match    │ Priority │ Counters │ Actions  │ Timeout│</span><br><span class="line">├──────────┼──────────┼──────────┼──────────┼────────┤</span><br><span class="line">│ Ingress  │    10    │  1.2M    │ Forward  │   0    │</span><br><span class="line">│ Port: 1  │          │ packets  │ Port: 2  │        │</span><br><span class="line">├──────────┼──────────┼──────────┼──────────┼────────┤</span><br><span class="line">│ Src IP:  │    20    │  500K    │ Drop     │   0    │</span><br><span class="line">│ 10.0.1.5 │          │ packets  │          │        │</span><br><span class="line">├──────────┼──────────┼──────────┼──────────┼────────┤</span><br><span class="line">│ *        │     0    │  10M     │ Send to  │   0    │</span><br><span class="line">│ (default)│          │ packets  │ Controller│        │</span><br><span class="line">└──────────┴──────────┴──────────┴──────────┴────────┘</span><br></pre></td></tr></table></figure>
<p><strong>OpenFlow Message Types</strong>:</p>
<ol type="1">
<li><p><strong>Controller-to-Switch</strong>: Commands from
controller</p>
<ul>
<li><code>OFPT_FLOW_MOD</code>: Add/modify/delete flow entries</li>
<li><code>OFPT_PACKET_OUT</code>: Send packet through switch</li>
<li><code>OFPT_PORT_MOD</code>: Modify port configuration</li>
</ul></li>
<li><p><strong>Asynchronous</strong>: Events from switch to
controller</p>
<ul>
<li><code>OFPT_PACKET_IN</code>: Packet doesn't match any flow</li>
<li><code>OFPT_FLOW_REMOVED</code>: Flow entry removed</li>
<li><code>OFPT_PORT_STATUS</code>: Port status changed</li>
</ul></li>
<li><p><strong>Symmetric</strong>: Bidirectional messages</p>
<ul>
<li><code>OFPT_HELLO</code>: Initial handshake</li>
<li><code>OFPT_ECHO_REQUEST/REPLY</code>: Keepalive</li>
</ul></li>
</ol>
<p><strong>OpenFlow Flow Entry Example</strong>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python example using Ryu SDN framework</span></span><br><span class="line"><span class="keyword">from</span> ryu.ofproto <span class="keyword">import</span> ofproto_v1_3</span><br><span class="line"><span class="keyword">from</span> ryu.controller <span class="keyword">import</span> ofp_event</span><br><span class="line"><span class="keyword">from</span> ryu.controller.handler <span class="keyword">import</span> MAIN_DISPATCHER, set_ev_cls</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleSwitch</span>(app_manager.RyuApp):</span><br><span class="line">    OFP_VERSIONS = [ofproto_v1_3.OFP_VERSION]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>(SimpleSwitch, self).__init__(*args, **kwargs)</span><br><span class="line">        self.mac_to_port = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">    @set_ev_cls(<span class="params">ofp_event.EventOFPPacketIn, MAIN_DISPATCHER</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">packet_in_handler</span>(<span class="params">self, ev</span>):</span><br><span class="line">        msg = ev.msg</span><br><span class="line">        datapath = msg.datapath</span><br><span class="line">        ofproto = datapath.ofproto</span><br><span class="line">        parser = datapath.ofproto_parser</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Extract packet information</span></span><br><span class="line">        in_port = msg.<span class="keyword">match</span>[<span class="string">&#x27;in_port&#x27;</span>]</span><br><span class="line">        pkt = packet.Packet(msg.data)</span><br><span class="line">        eth = pkt.get_protocols(ethernet.ethernet)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Learn MAC address</span></span><br><span class="line">        self.mac_to_port[datapath.<span class="built_in">id</span>][eth.src] = in_port</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Check if destination MAC is known</span></span><br><span class="line">        <span class="keyword">if</span> eth.dst <span class="keyword">in</span> self.mac_to_port[datapath.<span class="built_in">id</span>]:</span><br><span class="line">            out_port = self.mac_to_port[datapath.<span class="built_in">id</span>][eth.dst]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            out_port = ofproto.OFPP_FLOOD</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Install flow rule</span></span><br><span class="line">        actions = [parser.OFPActionOutput(out_port)]</span><br><span class="line">        <span class="keyword">match</span> = parser.OFPMatch(in_port=in_port, eth_dst=eth.dst)</span><br><span class="line">        self.add_flow(datapath, <span class="keyword">match</span>, actions)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Send packet</span></span><br><span class="line">        out = parser.OFPPacketOut(</span><br><span class="line">            datapath=datapath,</span><br><span class="line">            buffer_id=msg.buffer_id,</span><br><span class="line">            in_port=in_port,</span><br><span class="line">            actions=actions,</span><br><span class="line">            data=msg.data</span><br><span class="line">        )</span><br><span class="line">        datapath.send_msg(out)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_flow</span>(<span class="params">self, datapath, <span class="keyword">match</span>, actions</span>):</span><br><span class="line">        ofproto = datapath.ofproto</span><br><span class="line">        parser = datapath.ofproto_parser</span><br><span class="line"></span><br><span class="line">        inst = [parser.OFPInstructionActions(</span><br><span class="line">            ofproto.OFPIT_APPLY_ACTIONS, actions)]</span><br><span class="line"></span><br><span class="line">        mod = parser.OFPFlowMod(</span><br><span class="line">            datapath=datapath,</span><br><span class="line">            priority=<span class="number">1</span>,</span><br><span class="line">            <span class="keyword">match</span>=<span class="keyword">match</span>,</span><br><span class="line">            instructions=inst</span><br><span class="line">        )</span><br><span class="line">        datapath.send_msg(mod)</span><br></pre></td></tr></table></figure>
<h3 id="sdn-controllers">SDN Controllers</h3>
<p><strong>Popular SDN Controllers</strong>:</p>
<ol type="1">
<li><p><strong>OpenDaylight</strong>: Enterprise-grade, Java-based</p>
<ul>
<li>REST APIs</li>
<li>Model-driven architecture</li>
<li>Plugin ecosystem</li>
</ul></li>
<li><p><strong>ONOS</strong>: Carrier-grade SDN controller</p>
<ul>
<li>High availability</li>
<li>Distributed architecture</li>
<li>Network applications</li>
</ul></li>
<li><p><strong>Ryu</strong>: Python-based, lightweight</p>
<ul>
<li>Easy to learn and extend</li>
<li>Good for research and development</li>
<li>REST API support</li>
</ul></li>
<li><p><strong>Floodlight</strong>: Java-based, open source</p>
<ul>
<li>REST API</li>
<li>Modular architecture</li>
<li>Good documentation</li>
</ul></li>
</ol>
<p><strong>ONOS Controller Example</strong>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ONOS Application Example</span></span><br><span class="line"><span class="meta">@Component(immediate = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoadBalancerApp</span> <span class="keyword">implements</span> <span class="title class_">NetworkConfigListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Reference(cardinality = ReferenceCardinality.MANDATORY)</span></span><br><span class="line">    <span class="keyword">protected</span> FlowRuleService flowRuleService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Reference(cardinality = ReferenceCardinality.MANDATORY)</span></span><br><span class="line">    <span class="keyword">protected</span> PacketService packetService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Activate</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">activate</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;Load Balancer Application Started&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Deactivate</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deactivate</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;Load Balancer Application Stopped&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">installLoadBalancingRule</span><span class="params">(DeviceId deviceId, </span></span><br><span class="line"><span class="params">                                         PortNumber inPort,</span></span><br><span class="line"><span class="params">                                         IpAddress serverIp)</span> &#123;</span><br><span class="line">        <span class="type">TrafficSelector</span> <span class="variable">selector</span> <span class="operator">=</span> DefaultTrafficSelector.builder()</span><br><span class="line">            .matchInPort(inPort)</span><br><span class="line">            .matchEthType(Ethernet.TYPE_IPV4)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">        <span class="type">TrafficTreatment</span> <span class="variable">treatment</span> <span class="operator">=</span> DefaultTrafficTreatment.builder()</span><br><span class="line">            .setIpDst(serverIp)</span><br><span class="line">            .setOutput(PortNumber.portNumber(<span class="number">1</span>))</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">        <span class="type">FlowRule</span> <span class="variable">rule</span> <span class="operator">=</span> DefaultFlowRule.builder()</span><br><span class="line">            .forDevice(deviceId)</span><br><span class="line">            .withSelector(selector)</span><br><span class="line">            .withTreatment(treatment)</span><br><span class="line">            .withPriority(<span class="number">10</span>)</span><br><span class="line">            .makePermanent()</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">        flowRuleService.applyFlowRules(rule);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="sdn-use-cases">SDN Use Cases</h3>
<p><strong>1. Traffic Engineering</strong>: Optimize network paths based
on current conditions</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Dynamic path selection based on link utilization</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">select_path</span>(<span class="params">source, destination, topology</span>):</span><br><span class="line">    paths = find_all_paths(source, destination, topology)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Calculate path cost based on link utilization</span></span><br><span class="line">    path_costs = []</span><br><span class="line">    <span class="keyword">for</span> path <span class="keyword">in</span> paths:</span><br><span class="line">        cost = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(path) - <span class="number">1</span>):</span><br><span class="line">            link = (path[i], path[i+<span class="number">1</span>])</span><br><span class="line">            utilization = get_link_utilization(link)</span><br><span class="line">            cost += utilization * <span class="number">100</span>  <span class="comment"># Weight by utilization</span></span><br><span class="line">        path_costs.append((path, cost))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Select path with lowest cost</span></span><br><span class="line">    best_path = <span class="built_in">min</span>(path_costs, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> best_path</span><br></pre></td></tr></table></figure>
<p><strong>2. Network Virtualization</strong>: Create multiple logical
networks on shared infrastructure</p>
<p><strong>3. Security Policies</strong>: Centralized firewall and
access control</p>
<p><strong>4. Quality of Service (QoS)</strong>: Guarantee bandwidth and
latency for specific flows</p>
<p><strong>5. Network Monitoring</strong>: Real-time visibility into
network state</p>
<h2 id="network-functions-virtualization-nfv">Network Functions
Virtualization (NFV)</h2>
<p>Network Functions Virtualization (NFV) decouples network functions
from dedicated hardware appliances, running them as software on standard
servers.</p>
<h3 id="nfv-architecture">NFV Architecture</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Traditional Approach:</span><br><span class="line">┌─────────────┐  ┌─────────────┐  ┌─────────────┐</span><br><span class="line">│   Router    │  │  Firewall   │  │   Load      │</span><br><span class="line">│  Hardware   │  │  Hardware   │  │  Balancer   │</span><br><span class="line">│  Appliance  │  │  Appliance  │  │  Hardware   │</span><br><span class="line">└─────────────┘  └─────────────┘  └─────────────┘</span><br><span class="line"></span><br><span class="line">NFV Approach:</span><br><span class="line">┌─────────────────────────────────────────────┐</span><br><span class="line">│         Standard x86 Servers                 │</span><br><span class="line">│  ┌──────────┐  ┌──────────┐  ┌──────────┐  │</span><br><span class="line">│  │ Router   │  │ Firewall │  │  Load    │  │</span><br><span class="line">│  │   VNF    │  │   VNF    │  │ Balancer │  │</span><br><span class="line">│  │          │  │          │  │   VNF    │  │</span><br><span class="line">│  └──────────┘  └──────────┘  └──────────┘  │</span><br><span class="line">└─────────────────────────────────────────────┘</span><br></pre></td></tr></table></figure>
<p><strong>NFV Components</strong>:</p>
<ol type="1">
<li><p><strong>Virtualized Network Functions (VNFs)</strong>: Software
implementations of network functions</p>
<ul>
<li>Router VNF</li>
<li>Firewall VNF</li>
<li>Load Balancer VNF</li>
<li>NAT VNF</li>
</ul></li>
<li><p><strong>NFV Infrastructure (NFVI)</strong>: Hardware and software
resources</p>
<ul>
<li>Compute resources</li>
<li>Storage resources</li>
<li>Network resources</li>
<li>Virtualization layer</li>
</ul></li>
<li><p><strong>NFV Management and Orchestration (MANO)</strong>:</p>
<ul>
<li>VNF Manager: Lifecycle management of VNFs</li>
<li>Virtualized Infrastructure Manager (VIM): Manages NFVI
resources</li>
<li>NFV Orchestrator: Coordinates VNFs and resources</li>
</ul></li>
</ol>
<h3 id="nfv-benefits">NFV Benefits</h3>
<p><strong>Cost Reduction</strong>:</p>
<ul>
<li>Eliminate proprietary hardware</li>
<li>Use commodity servers</li>
<li>Reduce power consumption</li>
<li>Lower capital expenditure</li>
</ul>
<p><strong>Flexibility</strong>:</p>
<ul>
<li>Rapid deployment of new services</li>
<li>Easy scaling up/down</li>
<li>Dynamic resource allocation</li>
<li>Service chaining</li>
</ul>
<p><strong>Innovation</strong>:</p>
<ul>
<li>Faster time to market</li>
<li>Easier testing and validation</li>
<li>Software-based updates</li>
<li>DevOps practices</li>
</ul>
<h3 id="nfv-implementation-example">NFV Implementation Example</h3>
<p><strong>Firewall VNF using iptables</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Firewall VNF Configuration</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow established connections</span></span><br><span class="line">iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow SSH</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 22 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow HTTP/HTTPS</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 443 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment"># Block specific IP ranges</span></span><br><span class="line">iptables -A INPUT -s 192.168.100.0/24 -j DROP</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rate limiting</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 80 -m <span class="built_in">limit</span> --<span class="built_in">limit</span> 25/minute --limit-burst 100 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment"># Default deny</span></span><br><span class="line">iptables -P INPUT DROP</span><br><span class="line">iptables -P FORWARD DROP</span><br><span class="line">iptables -P OUTPUT ACCEPT</span><br></pre></td></tr></table></figure>
<p><strong>Router VNF using Linux</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Router VNF Configuration</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable IP forwarding</span></span><br><span class="line"><span class="built_in">echo</span> 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure interfaces</span></span><br><span class="line">ip addr add 10.0.1.1/24 dev eth0</span><br><span class="line">ip addr add 10.0.2.1/24 dev eth1</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add routes</span></span><br><span class="line">ip route add 10.0.3.0/24 via 10.0.2.2</span><br><span class="line"></span><br><span class="line"><span class="comment"># NAT configuration</span></span><br><span class="line">iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</span><br><span class="line">iptables -A FORWARD -i eth1 -o eth0 -j ACCEPT</span><br><span class="line">iptables -A FORWARD -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br></pre></td></tr></table></figure>
<p><strong>Load Balancer VNF using HAProxy</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># HAProxy Load Balancer VNF Configuration</span><br><span class="line">global</span><br><span class="line">    log /dev/log local0</span><br><span class="line">    maxconn 4096</span><br><span class="line">    daemon</span><br><span class="line"></span><br><span class="line">defaults</span><br><span class="line">    log global</span><br><span class="line">    mode http</span><br><span class="line">    option httplog</span><br><span class="line">    timeout connect 5000ms</span><br><span class="line">    timeout client 50000ms</span><br><span class="line">    timeout server 50000ms</span><br><span class="line"></span><br><span class="line">frontend http_front</span><br><span class="line">    bind *:80</span><br><span class="line">    default_backend http_back</span><br><span class="line"></span><br><span class="line">backend http_back</span><br><span class="line">    balance roundrobin</span><br><span class="line">    option httpchk GET /health</span><br><span class="line">    server web1 10.0.1.10:80 check</span><br><span class="line">    server web2 10.0.1.11:80 check</span><br><span class="line">    server web3 10.0.1.12:80 check</span><br></pre></td></tr></table></figure>
<h3 id="nfv-service-chaining">NFV Service Chaining</h3>
<p>Service chaining connects multiple VNFs in sequence to process
traffic.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Traffic Flow:</span><br><span class="line">Internet → Firewall VNF → Load Balancer VNF → Router VNF → Backend Servers</span><br></pre></td></tr></table></figure>
<p><strong>Service Chaining Configuration</strong>:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NFV Service Chain Definition</span></span><br><span class="line"><span class="attr">service_chain:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">web-traffic-chain</span></span><br><span class="line">  <span class="attr">vnfs:</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">firewall-vnf</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">firewall</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">firewall-vnf:latest</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">4GB</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">loadbalancer-vnf</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">loadbalancer</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">haproxy-vnf:latest</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">2GB</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">router-vnf</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">router</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">router-vnf:latest</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">1GB</span></span><br><span class="line">  <span class="attr">chain_order:</span></span><br><span class="line"></span><br><span class="line">    <span class="bullet">-</span> <span class="string">firewall-vnf</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">loadbalancer-vnf</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">router-vnf</span></span><br></pre></td></tr></table></figure>
<h2 id="vpn-and-direct-connect">VPN and Direct Connect</h2>
<h3 id="virtual-private-network-vpn">Virtual Private Network (VPN)</h3>
<p>VPNs create encrypted tunnels over public networks to connect remote
sites or users securely.</p>
<p><strong>VPN Types</strong>:</p>
<ol type="1">
<li><p><strong>Site-to-Site VPN</strong>: Connects entire networks</p>
<ul>
<li>Connects on-premises data center to VPC</li>
<li>Always-on connection</li>
<li>Uses IPsec protocol</li>
</ul></li>
<li><p><strong>Client VPN</strong>: Connects individual users</p>
<ul>
<li>Remote access for employees</li>
<li>SSL/TLS or IPsec</li>
<li>Per-user authentication</li>
</ul></li>
</ol>
<p><strong>AWS VPN Configuration</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># Customer Gateway (on-premises)</span><br><span class="line">resource &quot;aws_customer_gateway&quot; &quot;main&quot; &#123;</span><br><span class="line">  bgp_asn    = 65000</span><br><span class="line">  ip_address = &quot;203.0.113.12&quot;  # On-premises public IP</span><br><span class="line">  type       = &quot;ipsec.1&quot;</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;on-premises-gateway&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Virtual Private Gateway</span><br><span class="line">resource &quot;aws_vpn_gateway&quot; &quot;main&quot; &#123;</span><br><span class="line">  vpc_id = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;vpn-gateway&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># VPN Connection</span><br><span class="line">resource &quot;aws_vpn_connection&quot; &quot;main&quot; &#123;</span><br><span class="line">  vpn_gateway_id      = aws_vpn_gateway.main.id</span><br><span class="line">  customer_gateway_id = aws_customer_gateway.main.id</span><br><span class="line">  type                = &quot;ipsec.1&quot;</span><br><span class="line">  static_routes_only  = false</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;site-to-site-vpn&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Route to VPN</span><br><span class="line">resource &quot;aws_route&quot; &quot;vpn&quot; &#123;</span><br><span class="line">  route_table_id         = aws_route_table.private.id</span><br><span class="line">  destination_cidr_block = &quot;192.168.0.0/16&quot;  # On-premises network</span><br><span class="line">  gateway_id             = aws_vpn_gateway.main.id</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>VPN Tunnel Configuration (StrongSwan)</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># /etc/ipsec.conf</span><br><span class="line">config setup</span><br><span class="line">    charondebug=&quot;ike 2, knl 2, cfg 2&quot;</span><br><span class="line">    uniqueids=yes</span><br><span class="line"></span><br><span class="line">conn aws-vpc</span><br><span class="line">    type=tunnel</span><br><span class="line">    auto=start</span><br><span class="line">    keyexchange=ikev2</span><br><span class="line">    authby=secret</span><br><span class="line">    left=203.0.113.12          # On-premises public IP</span><br><span class="line">    leftsubnet=192.168.0.0/16  # On-premises network</span><br><span class="line">    right=54.123.45.67         # AWS VPN endpoint</span><br><span class="line">    rightsubnet=10.0.0.0/16    # VPC network</span><br><span class="line">    ike=aes256-sha256-modp2048</span><br><span class="line">    esp=aes256-sha256</span><br><span class="line">    dpdaction=restart</span><br><span class="line">    dpddelay=30s</span><br><span class="line">    dpdtimeout=120s</span><br></pre></td></tr></table></figure>
<h3 id="direct-connect">Direct Connect</h3>
<p>Direct Connect provides dedicated network connections from
on-premises to cloud providers, bypassing the internet.</p>
<p><strong>Benefits</strong>:</p>
<ul>
<li>Lower latency</li>
<li>More consistent network performance</li>
<li>Reduced bandwidth costs</li>
<li>Private connectivity</li>
</ul>
<p><strong>Direct Connect Architecture</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">On-Premises Data Center</span><br><span class="line">         │</span><br><span class="line">         │ Dedicated Fiber Connection</span><br><span class="line">         │ (1 Gbps, 10 Gbps, 100 Gbps)</span><br><span class="line">         ▼</span><br><span class="line">┌────────────────────┐</span><br><span class="line">│  Direct Connect    │</span><br><span class="line">│  Location (Colo)   │</span><br><span class="line">└─────────┬──────────┘</span><br><span class="line">          │</span><br><span class="line">          │ AWS/Azure/GCP Backbone</span><br><span class="line">          ▼</span><br><span class="line">┌────────────────────┐</span><br><span class="line">│   Cloud VPC        │</span><br><span class="line">└────────────────────┘</span><br></pre></td></tr></table></figure>
<p><strong>AWS Direct Connect Configuration</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># Direct Connect Connection</span><br><span class="line">resource &quot;aws_dx_connection&quot; &quot;main&quot; &#123;</span><br><span class="line">  name      = &quot;direct-connect-1gbps&quot;</span><br><span class="line">  bandwidth = &quot;1Gbps&quot;</span><br><span class="line">  location  = &quot;EqDC2&quot;  # Equinix Data Center</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;production-dx&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Virtual Interface (Private)</span><br><span class="line">resource &quot;aws_dx_private_virtual_interface&quot; &quot;main&quot; &#123;</span><br><span class="line">  connection_id = aws_dx_connection.main.id</span><br><span class="line">  name           = &quot;private-vif&quot;</span><br><span class="line">  vlan           = 100</span><br><span class="line">  address_family = &quot;ipv4&quot;</span><br><span class="line">  bgp_asn        = 65000</span><br><span class="line"></span><br><span class="line">  # VPC Gateway</span><br><span class="line">  vpn_gateway_id = aws_vpn_gateway.main.id</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="cross-region-networking">Cross-Region Networking</h2>
<p>Cross-region networking enables resources in different geographic
regions to communicate efficiently.</p>
<h3 id="challenges">Challenges</h3>
<ol type="1">
<li><strong>Latency</strong>: Physical distance increases latency</li>
<li><strong>Bandwidth Costs</strong>: Inter-region data transfer
costs</li>
<li><strong>Consistency</strong>: Maintaining data consistency across
regions</li>
<li><strong>Failover</strong>: Handling region failures</li>
</ol>
<h3 id="solutions">Solutions</h3>
<p><strong>1. Global Load Balancing</strong>: Route traffic to nearest
healthy region</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># AWS Route 53 Health Checks and Failover</span><br><span class="line">resource &quot;aws_route53_health_check&quot; &quot;us_east&quot; &#123;</span><br><span class="line">  fqdn              = &quot;us-east.example.com&quot;</span><br><span class="line">  port              = 443</span><br><span class="line">  type              = &quot;HTTPS&quot;</span><br><span class="line">  resource_path     = &quot;/health&quot;</span><br><span class="line">  failure_threshold = 3</span><br><span class="line">  request_interval  = 30</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_route53_record&quot; &quot;main&quot; &#123;</span><br><span class="line">  zone_id = aws_route53_zone.main.zone_id</span><br><span class="line">  name    = &quot;example.com&quot;</span><br><span class="line">  type    = &quot;A&quot;</span><br><span class="line"></span><br><span class="line">  failover_routing_policy &#123;</span><br><span class="line">    type = &quot;PRIMARY&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  set_identifier = &quot;us-east&quot;</span><br><span class="line">  health_check_id = aws_route53_health_check.us_east.id</span><br><span class="line">  records         = [&quot;54.123.45.67&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2. VPC Peering Across Regions</strong>: Connect VPCs in
different regions</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Cross-region VPC peering</span><br><span class="line">resource &quot;aws_vpc_peering_connection&quot; &quot;cross_region&quot; &#123;</span><br><span class="line">  vpc_id      = aws_vpc.us_east.id</span><br><span class="line">  peer_vpc_id = aws_vpc.eu_west.id</span><br><span class="line">  peer_region = &quot;eu-west-1&quot;</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;us-east-to-eu-west&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3. Transit Gateway</strong>: Centralized hub for VPC
connectivity</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">resource &quot;aws_ec2_transit_gateway&quot; &quot;main&quot; &#123;</span><br><span class="line">  description = &quot;Global transit gateway&quot;</span><br><span class="line">  </span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;global-tgw&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Attach VPCs from different regions</span><br><span class="line">resource &quot;aws_ec2_transit_gateway_vpc_attachment&quot; &quot;us_east&quot; &#123;</span><br><span class="line">  subnet_ids         = aws_subnet.us_east.*.id</span><br><span class="line">  transit_gateway_id = aws_ec2_transit_gateway.main.id</span><br><span class="line">  vpc_id             = aws_vpc.us_east.id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_ec2_transit_gateway_vpc_attachment&quot; &quot;eu_west&quot; &#123;</span><br><span class="line">  subnet_ids         = aws_subnet.eu_west.*.id</span><br><span class="line">  transit_gateway_id = aws_ec2_transit_gateway.main.id</span><br><span class="line">  vpc_id             = aws_vpc.eu_west.id</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="security-groups-and-network-acls">Security Groups and Network
ACLs</h2>
<h3 id="security-groups">Security Groups</h3>
<p>Security groups are stateful virtual firewalls at the instance
level.</p>
<p><strong>Characteristics</strong>:</p>
<ul>
<li>Stateful: Return traffic automatically allowed</li>
<li>Default deny: All traffic blocked unless explicitly allowed</li>
<li>Instance-level: Applied to individual instances</li>
<li>Can have multiple security groups per instance</li>
</ul>
<p><strong>Security Group Rules</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"># Web Server Security Group</span><br><span class="line">resource &quot;aws_security_group&quot; &quot;web&quot; &#123;</span><br><span class="line">  name        = &quot;web-sg&quot;</span><br><span class="line">  description = &quot;Security group for web servers&quot;</span><br><span class="line">  vpc_id      = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  # Allow HTTP from anywhere</span><br><span class="line">  ingress &#123;</span><br><span class="line">    description = &quot;HTTP&quot;</span><br><span class="line">    from_port   = 80</span><br><span class="line">    to_port     = 80</span><br><span class="line">    protocol    = &quot;tcp&quot;</span><br><span class="line">    cidr_blocks = [&quot;0.0.0.0/0&quot;]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Allow HTTPS from anywhere</span><br><span class="line">  ingress &#123;</span><br><span class="line">    description = &quot;HTTPS&quot;</span><br><span class="line">    from_port   = 443</span><br><span class="line">    to_port     = 443</span><br><span class="line">    protocol    = &quot;tcp&quot;</span><br><span class="line">    cidr_blocks = [&quot;0.0.0.0/0&quot;]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Allow SSH from specific IP</span><br><span class="line">  ingress &#123;</span><br><span class="line">    description = &quot;SSH&quot;</span><br><span class="line">    from_port   = 22</span><br><span class="line">    to_port     = 22</span><br><span class="line">    protocol    = &quot;tcp&quot;</span><br><span class="line">    cidr_blocks = [&quot;203.0.113.0/24&quot;]  # Office IP range</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Allow all outbound traffic</span><br><span class="line">  egress &#123;</span><br><span class="line">    from_port   = 0</span><br><span class="line">    to_port     = 0</span><br><span class="line">    protocol    = &quot;-1&quot;</span><br><span class="line">    cidr_blocks = [&quot;0.0.0.0/0&quot;]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;web-security-group&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Database Security Group</span><br><span class="line">resource &quot;aws_security_group&quot; &quot;database&quot; &#123;</span><br><span class="line">  name        = &quot;db-sg&quot;</span><br><span class="line">  description = &quot;Security group for database&quot;</span><br><span class="line">  vpc_id      = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  # Allow MySQL from web servers only</span><br><span class="line">  ingress &#123;</span><br><span class="line">    description     = &quot;MySQL&quot;</span><br><span class="line">    from_port       = 3306</span><br><span class="line">    to_port         = 3306</span><br><span class="line">    protocol        = &quot;tcp&quot;</span><br><span class="line">    security_groups = [aws_security_group.web.id]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # No outbound rules (default deny)</span><br><span class="line">  </span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;database-security-group&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="network-acls">Network ACLs</h3>
<p>Network ACLs are stateless subnet-level firewalls.</p>
<p><strong>Characteristics</strong>:</p>
<ul>
<li>Stateless: Must explicitly allow return traffic</li>
<li>Subnet-level: Applied to entire subnets</li>
<li>Rule evaluation: Processed in order (lowest to highest)</li>
<li>Default allow: All traffic allowed unless explicitly denied</li>
</ul>
<p><strong>Network ACL Configuration</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">resource &quot;aws_network_acl&quot; &quot;main&quot; &#123;</span><br><span class="line">  vpc_id = aws_vpc.main.id</span><br><span class="line"></span><br><span class="line">  # Allow HTTP inbound</span><br><span class="line">  ingress &#123;</span><br><span class="line">    rule_no    = 100</span><br><span class="line">    protocol   = &quot;tcp&quot;</span><br><span class="line">    from_port  = 80</span><br><span class="line">    to_port    = 80</span><br><span class="line">    cidr_block = &quot;0.0.0.0/0&quot;</span><br><span class="line">    action     = &quot;allow&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Allow HTTPS inbound</span><br><span class="line">  ingress &#123;</span><br><span class="line">    rule_no    = 110</span><br><span class="line">    protocol   = &quot;tcp&quot;</span><br><span class="line">    from_port  = 443</span><br><span class="line">    to_port    = 443</span><br><span class="line">    cidr_block = &quot;0.0.0.0/0&quot;</span><br><span class="line">    action     = &quot;allow&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Allow ephemeral ports for return traffic</span><br><span class="line">  ingress &#123;</span><br><span class="line">    rule_no    = 120</span><br><span class="line">    protocol   = &quot;tcp&quot;</span><br><span class="line">    from_port  = 1024</span><br><span class="line">    to_port    = 65535</span><br><span class="line">    cidr_block = &quot;0.0.0.0/0&quot;</span><br><span class="line">    action     = &quot;allow&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Allow all outbound</span><br><span class="line">  egress &#123;</span><br><span class="line">    rule_no    = 100</span><br><span class="line">    protocol   = &quot;-1&quot;</span><br><span class="line">    from_port  = 0</span><br><span class="line">    to_port    = 0</span><br><span class="line">    cidr_block = &quot;0.0.0.0/0&quot;</span><br><span class="line">    action     = &quot;allow&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name = &quot;main-nacl&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="security-best-practices">Security Best Practices</h3>
<ol type="1">
<li><strong>Principle of Least Privilege</strong>: Only allow necessary
traffic</li>
<li><strong>Defense in Depth</strong>: Use both security groups and
NACLs</li>
<li><strong>Regular Audits</strong>: Review and update rules
regularly</li>
<li><strong>IP Whitelisting</strong>: Restrict access to known IP
ranges</li>
<li><strong>Logging</strong>: Enable VPC Flow Logs for monitoring</li>
</ol>
<h2 id="network-monitoring-and-troubleshooting">Network Monitoring and
Troubleshooting</h2>
<h3 id="vpc-flow-logs">VPC Flow Logs</h3>
<p>VPC Flow Logs capture information about IP traffic flowing through
your VPC.</p>
<p><strong>Flow Log Configuration</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">resource &quot;aws_flow_log&quot; &quot;main&quot; &#123;</span><br><span class="line">  iam_role_arn    = aws_iam_role.flow_log.arn</span><br><span class="line">  log_destination = aws_cloudwatch_log_group.flow_log.arn</span><br><span class="line">  traffic_type    = &quot;ALL&quot;</span><br><span class="line">  vpc_id          = aws_vpc.main.id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_cloudwatch_log_group&quot; &quot;flow_log&quot; &#123;</span><br><span class="line">  name              = &quot;vpc-flow-logs&quot;</span><br><span class="line">  retention_in_days = 30</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Flow Log Analysis</strong>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Analyze VPC Flow Logs</span></span><br><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line">logs_client = boto3.client(<span class="string">&#x27;logs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Query flow logs</span></span><br><span class="line">response = logs_client.filter_log_events(</span><br><span class="line">    logGroupName=<span class="string">&#x27;vpc-flow-logs&#x27;</span>,</span><br><span class="line">    startTime=<span class="number">1234567890000</span>,</span><br><span class="line">    endTime=<span class="number">1234567900000</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Parse and analyze</span></span><br><span class="line">traffic_stats = defaultdict(<span class="built_in">int</span>)</span><br><span class="line"><span class="keyword">for</span> event <span class="keyword">in</span> response[<span class="string">&#x27;events&#x27;</span>]:</span><br><span class="line">    log_line = event[<span class="string">&#x27;message&#x27;</span>]</span><br><span class="line">    <span class="comment"># Flow log format: version account-id interface-id srcaddr dstaddr srcport dstport protocol packets bytes start end action log-status</span></span><br><span class="line">    parts = log_line.split()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(parts) &gt;= <span class="number">13</span>:</span><br><span class="line">        src_addr = parts[<span class="number">3</span>]</span><br><span class="line">        dst_addr = parts[<span class="number">4</span>]</span><br><span class="line">        protocol = parts[<span class="number">6</span>]</span><br><span class="line">        bytes_transferred = <span class="built_in">int</span>(parts[<span class="number">8</span>])</span><br><span class="line">        </span><br><span class="line">        traffic_stats[(src_addr, dst_addr, protocol)] += bytes_transferred</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print top traffic flows</span></span><br><span class="line"><span class="keyword">for</span> (src, dst, proto), bytes_count <span class="keyword">in</span> <span class="built_in">sorted</span>(</span><br><span class="line">    traffic_stats.items(), </span><br><span class="line">    key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], </span><br><span class="line">    reverse=<span class="literal">True</span></span><br><span class="line">)[:<span class="number">10</span>]:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;src&#125;</span> -&gt; <span class="subst">&#123;dst&#125;</span> (<span class="subst">&#123;proto&#125;</span>): <span class="subst">&#123;bytes_count / <span class="number">1024</span> / <span class="number">1024</span>:<span class="number">.2</span>f&#125;</span> MB&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="network-troubleshooting-tools">Network Troubleshooting
Tools</h3>
<p><strong>1. ping</strong>: Test connectivity</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Basic ping</span></span><br><span class="line">ping 8.8.8.8</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ping with specific interface</span></span><br><span class="line">ping -I eth0 10.0.1.10</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ping with packet size</span></span><br><span class="line">ping -s 1472 10.0.1.10</span><br></pre></td></tr></table></figure>
<p><strong>2. traceroute</strong>: Trace network path</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># IPv4 traceroute</span></span><br><span class="line">traceroute example.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># IPv6 traceroute</span></span><br><span class="line">traceroute6 example.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># TCP traceroute</span></span><br><span class="line">traceroute -T -p 443 example.com</span><br></pre></td></tr></table></figure>
<p><strong>3. tcpdump</strong>: Packet capture</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Capture all traffic on interface</span></span><br><span class="line">tcpdump -i eth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># Capture specific port</span></span><br><span class="line">tcpdump -i eth0 port 80</span><br><span class="line"></span><br><span class="line"><span class="comment"># Capture and save to file</span></span><br><span class="line">tcpdump -i eth0 -w capture.pcap</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read from file</span></span><br><span class="line">tcpdump -r capture.pcap</span><br></pre></td></tr></table></figure>
<p><strong>4. netstat</strong>: Network connections</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show all listening ports</span></span><br><span class="line">netstat -tuln</span><br><span class="line"></span><br><span class="line"><span class="comment"># Show all connections</span></span><br><span class="line">netstat -tun</span><br><span class="line"></span><br><span class="line"><span class="comment"># Show process information</span></span><br><span class="line">netstat -tulnp</span><br></pre></td></tr></table></figure>
<p><strong>5. ss</strong>: Modern netstat replacement</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show listening sockets</span></span><br><span class="line">ss -tuln</span><br><span class="line"></span><br><span class="line"><span class="comment"># Show connections</span></span><br><span class="line">ss -tun</span><br><span class="line"></span><br><span class="line"><span class="comment"># Show process information</span></span><br><span class="line">ss -tulnp</span><br></pre></td></tr></table></figure>
<p><strong>6. iptables</strong>: Firewall rules</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># List all rules</span></span><br><span class="line">iptables -L -n -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># List NAT rules</span></span><br><span class="line">iptables -t nat -L -n -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check specific rule</span></span><br><span class="line">iptables -C INPUT -p tcp --dport 80 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h3 id="common-network-issues-and-solutions">Common Network Issues and
Solutions</h3>
<p><strong>Issue 1: Cannot reach instance from internet</strong></p>
<p><strong>Diagnosis</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Check security group rules</span></span><br><span class="line">aws ec2 describe-security-groups --group-ids sg-12345678</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check route table</span></span><br><span class="line">aws ec2 describe-route-tables --route-table-ids rtb-12345678</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check network ACLs</span></span><br><span class="line">aws ec2 describe-network-acls --network-acl-ids acl-12345678</span><br></pre></td></tr></table></figure></p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Verify security group allows inbound traffic</li>
<li>Check route table has route to internet gateway</li>
<li>Ensure instance has public IP</li>
<li>Verify network ACL allows traffic</li>
</ul>
<p><strong>Issue 2: High latency between regions</strong></p>
<p><strong>Diagnosis</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Measure latency</span></span><br><span class="line">ping -c 10 us-east-instance.example.com</span><br><span class="line">ping -c 10 eu-west-instance.example.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># Trace route</span></span><br><span class="line">traceroute us-east-instance.example.com</span><br></pre></td></tr></table></figure></p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Use Direct Connect for dedicated connections</li>
<li>Implement CDN for static content</li>
<li>Deploy resources closer to users</li>
<li>Optimize application architecture</li>
</ul>
<p><strong>Issue 3: Intermittent connectivity</strong></p>
<p><strong>Diagnosis</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Monitor connectivity</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    ping -c 1 10.0.1.10 &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;OK&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;FAIL&quot;</span></span><br><span class="line">    <span class="built_in">sleep</span> 1</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check flow logs for dropped packets</span></span><br><span class="line">aws logs filter-log-events \</span><br><span class="line">    --log-group-name vpc-flow-logs \</span><br><span class="line">    --filter-pattern <span class="string">&quot;REJECT&quot;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Check for rate limiting</li>
<li>Review security group rules</li>
<li>Verify network ACL rules</li>
<li>Check for DDoS attacks</li>
</ul>
<h2 id="case-studies">Case Studies</h2>
<h3 id="case-study-1-e-commerce-platform-migration">Case Study 1:
E-commerce Platform Migration</h3>
<p><strong>Scenario</strong>: A large e-commerce platform migrating from
on-premises to AWS, requiring high availability and global reach.</p>
<p><strong>Requirements</strong>:</p>
<ul>
<li>Multi-region deployment (US, EU, Asia)</li>
<li>99.99% uptime SLA</li>
<li>Sub-100ms latency for API calls</li>
<li>Handle 10M+ requests per day</li>
<li>PCI-DSS compliance</li>
</ul>
<p><strong>Architecture</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Global Users</span><br><span class="line">     │</span><br><span class="line">     ├─► US-East (Primary)</span><br><span class="line">     │   ├─► Application Load Balancer</span><br><span class="line">     │   ├─► Auto Scaling Group (Web Servers)</span><br><span class="line">     │   ├─► RDS Multi-AZ (Database)</span><br><span class="line">     │   └─► ElastiCache (Redis)</span><br><span class="line">     │</span><br><span class="line">     ├─► EU-West (Secondary)</span><br><span class="line">     │   └─► (Same architecture)</span><br><span class="line">     │</span><br><span class="line">     └─► Asia-Pacific (Tertiary)</span><br><span class="line">         └─► (Same architecture)</span><br><span class="line"></span><br><span class="line">CDN (CloudFront)</span><br><span class="line">     │</span><br><span class="line">     └─► S3 (Static Assets)</span><br></pre></td></tr></table></figure>
<p><strong>Implementation</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"># Multi-region VPC setup</span><br><span class="line">module &quot;vpc_us_east&quot; &#123;</span><br><span class="line">  source = &quot;./modules/vpc&quot;</span><br><span class="line">  region = &quot;us-east-1&quot;</span><br><span class="line">  cidr   = &quot;10.0.0.0/16&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module &quot;vpc_eu_west&quot; &#123;</span><br><span class="line">  source = &quot;./modules/vpc&quot;</span><br><span class="line">  region = &quot;eu-west-1&quot;</span><br><span class="line">  cidr   = &quot;10.1.0.0/16&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module &quot;vpc_ap_southeast&quot; &#123;</span><br><span class="line">  source = &quot;./modules/vpc&quot;</span><br><span class="line">  region = &quot;ap-southeast-1&quot;</span><br><span class="line">  cidr   = &quot;10.2.0.0/16&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Global Load Balancer (Route 53)</span><br><span class="line">resource &quot;aws_route53_record&quot; &quot;api&quot; &#123;</span><br><span class="line">  zone_id = aws_route53_zone.main.zone_id</span><br><span class="line">  name    = &quot;api.example.com&quot;</span><br><span class="line">  type    = &quot;A&quot;</span><br><span class="line"></span><br><span class="line">  latency_routing_policy &#123;</span><br><span class="line">    region = &quot;us-east-1&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  set_identifier = &quot;us-east&quot;</span><br><span class="line">  records        = [module.vpc_us_east.alb_dns]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Cross-region replication for database</span><br><span class="line">resource &quot;aws_db_instance&quot; &quot;primary&quot; &#123;</span><br><span class="line">  identifier = &quot;db-primary&quot;</span><br><span class="line">  engine     = &quot;mysql&quot;</span><br><span class="line">  instance_class = &quot;db.r5.xlarge&quot;</span><br><span class="line">  multi_az   = true</span><br><span class="line">  </span><br><span class="line">  # Enable cross-region read replicas</span><br><span class="line">  replicate_source_db = null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_db_instance&quot; &quot;replica_eu&quot; &#123;</span><br><span class="line">  identifier = &quot;db-replica-eu&quot;</span><br><span class="line">  replicate_source_db = aws_db_instance.primary.identifier</span><br><span class="line">  availability_zone   = &quot;eu-west-1a&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Results</strong>:</p>
<ul>
<li><strong>Latency</strong>: Reduced from 250ms to 45ms (82%
improvement)</li>
<li><strong>Availability</strong>: Achieved 99.99% uptime</li>
<li><strong>Cost</strong>: 40% reduction compared to on-premises</li>
<li><strong>Scalability</strong>: Handled 15M requests/day during
peak</li>
</ul>
<h3 id="case-study-2-financial-services-sdn-implementation">Case Study
2: Financial Services SDN Implementation</h3>
<p><strong>Scenario</strong>: A financial services company implementing
SDN to improve network agility and reduce operational costs.</p>
<p><strong>Requirements</strong>:</p>
<ul>
<li>Centralized network management</li>
<li>Dynamic traffic engineering</li>
<li>Security policy enforcement</li>
<li>Compliance with financial regulations</li>
</ul>
<p><strong>Architecture</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SDN Controller (ONOS)</span><br><span class="line">     │</span><br><span class="line">     ├─► Data Center 1 (Trading)</span><br><span class="line">     │   ├─► OpenFlow Switches</span><br><span class="line">     │   └─► VNFs (Firewall, Load Balancer)</span><br><span class="line">     │</span><br><span class="line">     ├─► Data Center 2 (Backend)</span><br><span class="line">     │   └─► OpenFlow Switches</span><br><span class="line">     │</span><br><span class="line">     └─► Cloud VPC (Disaster Recovery)</span><br><span class="line">         └─► Virtual Switches</span><br></pre></td></tr></table></figure>
<p><strong>Implementation</strong>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SDN Application for Traffic Engineering</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TrafficEngineeringApp</span>(app_manager.RyuApp):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>(TrafficEngineeringApp, self).__init__(*args, **kwargs)</span><br><span class="line">        self.link_utilization = &#123;&#125;</span><br><span class="line">        self.path_cache = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">    @set_ev_cls(<span class="params">ofp_event.EventOFPPacketIn, MAIN_DISPATCHER</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">packet_in_handler</span>(<span class="params">self, ev</span>):</span><br><span class="line">        <span class="comment"># Analyze packet and select optimal path</span></span><br><span class="line">        path = self.select_optimal_path(src, dst)</span><br><span class="line">        self.install_flow_rules(path)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">select_optimal_path</span>(<span class="params">self, src, dst</span>):</span><br><span class="line">        <span class="comment"># Get all possible paths</span></span><br><span class="line">        paths = self.get_all_paths(src, dst)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Calculate path cost based on utilization</span></span><br><span class="line">        best_path = <span class="built_in">min</span>(paths, key=<span class="keyword">lambda</span> p: self.calculate_path_cost(p))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> best_path</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">calculate_path_cost</span>(<span class="params">self, path</span>):</span><br><span class="line">        total_cost = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(path) - <span class="number">1</span>):</span><br><span class="line">            link = (path[i], path[i+<span class="number">1</span>])</span><br><span class="line">            utilization = self.get_link_utilization(link)</span><br><span class="line">            <span class="comment"># Prefer paths with lower utilization</span></span><br><span class="line">            cost = utilization * <span class="number">100</span></span><br><span class="line">            total_cost += cost</span><br><span class="line">        <span class="keyword">return</span> total_cost</span><br></pre></td></tr></table></figure>
<p><strong>Results</strong>:</p>
<ul>
<li><strong>Network Utilization</strong>: Improved from 60% to 85%</li>
<li><strong>Latency</strong>: Reduced by 30% through optimal
routing</li>
<li><strong>Operational Costs</strong>: Reduced by 35%</li>
<li><strong>Policy Deployment</strong>: Reduced from days to
minutes</li>
</ul>
<h3 id="case-study-3-media-streaming-platform-with-global-cdn">Case
Study 3: Media Streaming Platform with Global CDN</h3>
<p><strong>Scenario</strong>: A video streaming platform serving
millions of users worldwide, requiring low latency and high
bandwidth.</p>
<p><strong>Requirements</strong>:</p>
<ul>
<li>Sub-second video start time</li>
<li>Support 4K streaming</li>
<li>Handle 50M+ concurrent users</li>
<li>Global content distribution</li>
<li>Cost-effective bandwidth usage</li>
</ul>
<p><strong>Architecture</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Users Worldwide</span><br><span class="line">     │</span><br><span class="line">     ├─► CDN Edge (North America)</span><br><span class="line">     │   ├─► Cache Hit: 95%</span><br><span class="line">     │   └─► Latency: 20ms</span><br><span class="line">     │</span><br><span class="line">     ├─► CDN Edge (Europe)</span><br><span class="line">     │   ├─► Cache Hit: 92%</span><br><span class="line">     │   └─► Latency: 25ms</span><br><span class="line">     │</span><br><span class="line">     ├─► CDN Edge (Asia)</span><br><span class="line">     │   ├─► Cache Hit: 90%</span><br><span class="line">     │   └─► Latency: 30ms</span><br><span class="line">     │</span><br><span class="line">     └─► Origin Servers (Multi-region)</span><br><span class="line">         ├─► S3 (Video Storage)</span><br><span class="line">         └─► EC2 (Transcoding)</span><br></pre></td></tr></table></figure>
<p><strong>Implementation</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"># CloudFront Distribution for Video Streaming</span><br><span class="line">resource &quot;aws_cloudfront_distribution&quot; &quot;video&quot; &#123;</span><br><span class="line">  origin &#123;</span><br><span class="line">    domain_name = aws_s3_bucket.videos.bucket_regional_domain_name</span><br><span class="line">    origin_id   = &quot;S3-videos&quot;</span><br><span class="line"></span><br><span class="line">    s3_origin_config &#123;</span><br><span class="line">      origin_access_identity = aws_cloudfront_origin_access_identity.video.cloudfront_access_identity_path</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  enabled         = true</span><br><span class="line">  is_ipv6_enabled = true</span><br><span class="line">  comment         = &quot;Video streaming CDN&quot;</span><br><span class="line"></span><br><span class="line">  # Video streaming cache behavior</span><br><span class="line">  ordered_cache_behavior &#123;</span><br><span class="line">    path_pattern     = &quot;/videos/*&quot;</span><br><span class="line">    allowed_methods  = [&quot;GET&quot;, &quot;HEAD&quot;, &quot;OPTIONS&quot;]</span><br><span class="line">    cached_methods   = [&quot;GET&quot;, &quot;HEAD&quot;]</span><br><span class="line">    target_origin_id = &quot;S3-videos&quot;</span><br><span class="line"></span><br><span class="line">    forwarded_values &#123;</span><br><span class="line">      query_string = false</span><br><span class="line">      headers      = [&quot;Origin&quot;, &quot;Access-Control-Request-Headers&quot;, &quot;Access-Control-Request-Method&quot;]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    min_ttl                = 0</span><br><span class="line">    default_ttl            = 86400      # 24 hours</span><br><span class="line">    max_ttl                = 31536000   # 1 year</span><br><span class="line">    compress               = true</span><br><span class="line">    viewer_protocol_policy = &quot;redirect-to-https&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Adaptive bitrate streaming support</span><br><span class="line">  ordered_cache_behavior &#123;</span><br><span class="line">    path_pattern     = &quot;/streaming/*&quot;</span><br><span class="line">    allowed_methods  = [&quot;GET&quot;, &quot;HEAD&quot;, &quot;OPTIONS&quot;]</span><br><span class="line">    cached_methods   = [&quot;GET&quot;, &quot;HEAD&quot;]</span><br><span class="line">    target_origin_id = &quot;S3-videos&quot;</span><br><span class="line"></span><br><span class="line">    forwarded_values &#123;</span><br><span class="line">      query_string = true</span><br><span class="line">      headers      = [&quot;Origin&quot;]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    min_ttl                = 0</span><br><span class="line">    default_ttl            = 3600        # 1 hour</span><br><span class="line">    max_ttl                = 86400      # 24 hours</span><br><span class="line">    compress               = true</span><br><span class="line">    viewer_protocol_policy = &quot;redirect-to-https&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  restrictions &#123;</span><br><span class="line">    geo_restriction &#123;</span><br><span class="line">      restriction_type = &quot;none&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  viewer_certificate &#123;</span><br><span class="line">    acm_certificate_arn      = aws_acm_certificate.video.arn</span><br><span class="line">    ssl_support_method       = &quot;sni-only&quot;</span><br><span class="line">    minimum_protocol_version = &quot;TLSv1.2_2021&quot;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  # Price class for cost optimization</span><br><span class="line">  price_class = &quot;PriceClass_All&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>CDN Cache Strategy</strong>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Cache warming script</span></span><br><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line">cloudfront = boto3.client(<span class="string">&#x27;cloudfront&#x27;</span>)</span><br><span class="line">s3 = boto3.client(<span class="string">&#x27;s3&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">warm_cache</span>(<span class="params">video_key</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Warm CDN cache for a video&quot;&quot;&quot;</span></span><br><span class="line">    distribution_id = <span class="string">&#x27;E1234567890ABC&#x27;</span></span><br><span class="line">    video_url = <span class="string">f&quot;https://d<span class="subst">&#123;distribution_id&#125;</span>.cloudfront.net/videos/<span class="subst">&#123;video_key&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Request video to populate cache</span></span><br><span class="line">    response = requests.head(video_url)</span><br><span class="line">    <span class="keyword">return</span> response.status_code == <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get popular videos from S3</span></span><br><span class="line">paginator = s3.get_paginator(<span class="string">&#x27;list_objects_v2&#x27;</span>)</span><br><span class="line">pages = paginator.paginate(Bucket=<span class="string">&#x27;video-bucket&#x27;</span>, Prefix=<span class="string">&#x27;videos/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">popular_videos = []</span><br><span class="line"><span class="keyword">for</span> page <span class="keyword">in</span> pages:</span><br><span class="line">    <span class="keyword">for</span> obj <span class="keyword">in</span> page.get(<span class="string">&#x27;Contents&#x27;</span>, []):</span><br><span class="line">        <span class="comment"># Filter by popularity (simplified)</span></span><br><span class="line">        <span class="keyword">if</span> obj[<span class="string">&#x27;Size&#x27;</span>] &gt; <span class="number">0</span>:</span><br><span class="line">            popular_videos.append(obj[<span class="string">&#x27;Key&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Warm cache for top 1000 videos</span></span><br><span class="line"><span class="keyword">with</span> ThreadPoolExecutor(max_workers=<span class="number">50</span>) <span class="keyword">as</span> executor:</span><br><span class="line">    executor.<span class="built_in">map</span>(warm_cache, popular_videos[:<span class="number">1000</span>])</span><br></pre></td></tr></table></figure>
<p><strong>Results</strong>:</p>
<ul>
<li><strong>Video Start Time</strong>: Reduced from 3s to 0.8s (73%
improvement)</li>
<li><strong>Cache Hit Ratio</strong>: 94% globally</li>
<li><strong>Bandwidth Costs</strong>: Reduced by 88% compared to direct
origin serving</li>
<li><strong>User Experience</strong>: 4.8/5.0 rating (up from
3.2/5.0)</li>
<li><strong>Concurrent Users</strong>: Successfully handled 60M+
users</li>
</ul>
<h2 id="qa-cloud-networking-and-sdn">Q&amp;A: Cloud Networking and
SDN</h2>
<h3 id="q1-whats-the-difference-between-security-groups-and-network-acls">Q1:
What's the difference between Security Groups and Network ACLs?</h3>
<p><strong>A</strong>: Security Groups and Network ACLs provide
different layers of network security:</p>
<table>
<colgroup>
<col style="width: 23%">
<col style="width: 41%">
<col style="width: 35%">
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Security Groups</th>
<th>Network ACLs</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Level</strong></td>
<td>Instance level</td>
<td>Subnet level</td>
</tr>
<tr>
<td><strong>State</strong></td>
<td>Stateful (return traffic auto-allowed)</td>
<td>Stateless (must allow return traffic)</td>
</tr>
<tr>
<td><strong>Rules</strong></td>
<td>Allow rules only</td>
<td>Allow and deny rules</td>
</tr>
<tr>
<td><strong>Evaluation</strong></td>
<td>All rules evaluated</td>
<td>Rules evaluated in order</td>
</tr>
<tr>
<td><strong>Default</strong></td>
<td>Deny all</td>
<td>Allow all</td>
</tr>
<tr>
<td><strong>Scope</strong></td>
<td>Applied to specific instances</td>
<td>Applied to entire subnet</td>
</tr>
</tbody>
</table>
<p><strong>Best Practice</strong>: Use Security Groups as primary
defense (easier to manage), and Network ACLs for additional subnet-level
protection when needed.</p>
<h3 id="q2-how-do-i-choose-between-network-load-balancer-and-application-load-balancer">Q2:
How do I choose between Network Load Balancer and Application Load
Balancer?</h3>
<p><strong>A</strong>: Choose based on your requirements:</p>
<p><strong>Use Network Load Balancer (NLB) when</strong>:</p>
<ul>
<li>You need ultra-low latency (&lt;100ms)</li>
<li>Handling millions of requests per second</li>
<li>Working with TCP/UDP protocols</li>
<li>Preserving source IP address is important</li>
<li>High-performance requirements</li>
</ul>
<p><strong>Use Application Load Balancer (ALB) when</strong>:</p>
<ul>
<li>You need content-based routing (path, host, headers)</li>
<li>SSL/TLS termination at load balancer</li>
<li>HTTP/HTTPS traffic</li>
<li>WebSocket or HTTP/2 support needed</li>
<li>Advanced request routing required</li>
</ul>
<p><strong>Example</strong>: For a gaming application with TCP traffic
requiring low latency, use NLB. For a web application with microservices
requiring path-based routing, use ALB.</p>
<h3 id="q3-what-is-the-difference-between-vpc-peering-and-transit-gateway">Q3:
What is the difference between VPC Peering and Transit Gateway?</h3>
<p><strong>A</strong>:</p>
<p><strong>VPC Peering</strong>:</p>
<ul>
<li>Point-to-point connection between two VPCs</li>
<li>Simple and cost-effective for few VPCs</li>
<li>No bandwidth charges (within same region)</li>
<li>Limited scalability (full mesh becomes complex)</li>
</ul>
<p><strong>Transit Gateway</strong>:</p>
<ul>
<li>Hub-and-spoke model connecting multiple VPCs</li>
<li>Centralized management</li>
<li>Better for many VPCs (scales better)</li>
<li>Supports VPN and Direct Connect attachments</li>
<li>Per-GB data processing charges</li>
</ul>
<p><strong>When to use</strong>:</p>
<ul>
<li><strong>VPC Peering</strong>: 2-5 VPCs, simple connectivity
needs</li>
<li><strong>Transit Gateway</strong>: 5+ VPCs, complex network topology,
need centralized management</li>
</ul>
<h3 id="q4-how-does-sdn-improve-network-management-compared-to-traditional-networking">Q4:
How does SDN improve network management compared to traditional
networking?</h3>
<p><strong>A</strong>: SDN provides several key advantages:</p>
<ol type="1">
<li><strong>Centralized Control</strong>: Single point of management
instead of configuring each device individually</li>
<li><strong>Programmability</strong>: Networks can be controlled via
software APIs</li>
<li><strong>Dynamic Configuration</strong>: Changes can be made
instantly without touching hardware</li>
<li><strong>Traffic Engineering</strong>: Optimize paths based on
real-time conditions</li>
<li><strong>Network Virtualization</strong>: Create multiple logical
networks on shared infrastructure</li>
<li><strong>Automation</strong>: Integrate with DevOps tools and CI/CD
pipelines</li>
</ol>
<p><strong>Example</strong>: In traditional networking, changing a
firewall rule requires logging into each firewall device. With SDN, you
update a policy in the controller, and it's automatically applied to all
relevant devices.</p>
<h3 id="q5-what-are-the-main-components-of-nfv-architecture">Q5: What
are the main components of NFV architecture?</h3>
<p><strong>A</strong>: NFV architecture consists of three main
components:</p>
<ol type="1">
<li><p><strong>Virtualized Network Functions (VNFs)</strong>: Software
implementations of network functions (routers, firewalls, load
balancers) running on standard servers</p></li>
<li><p><strong>NFV Infrastructure (NFVI)</strong>: The hardware and
software resources that provide compute, storage, and networking
capabilities:</p>
<ul>
<li>Compute: Servers (CPU, memory)</li>
<li>Storage: Storage systems</li>
<li>Network: Switches, routers</li>
<li>Virtualization Layer: Hypervisor or container runtime</li>
</ul></li>
<li><p><strong>NFV Management and Orchestration (MANO)</strong>:</p>
<ul>
<li><strong>VNF Manager</strong>: Manages lifecycle of VNFs (create,
update, delete)</li>
<li><strong>Virtualized Infrastructure Manager (VIM)</strong>: Manages
NFVI resources (OpenStack, Kubernetes)</li>
<li><strong>NFV Orchestrator</strong>: Coordinates VNFs and resources to
create network services</li>
</ul></li>
</ol>
<h3 id="q6-how-do-cdns-reduce-latency-and-improve-performance">Q6: How
do CDNs reduce latency and improve performance?</h3>
<p><strong>A</strong>: CDNs improve performance through several
mechanisms:</p>
<ol type="1">
<li><p><strong>Geographic Distribution</strong>: Content cached at edge
locations closer to users</p>
<ul>
<li>Example: User in Tokyo accesses content from Tokyo edge (20ms)
instead of US origin (200ms)</li>
</ul></li>
<li><p><strong>Caching</strong>: Frequently accessed content stored at
edge, reducing origin load</p>
<ul>
<li>Cache hit ratio typically 90%+ for static content</li>
</ul></li>
<li><p><strong>Compression</strong>: Gzip/Brotli compression reduces
bandwidth usage</p>
<ul>
<li>Can reduce file sizes by 70-90%</li>
</ul></li>
<li><p><strong>Optimized Routing</strong>: CDNs use intelligent routing
to select best edge server</p>
<ul>
<li>Based on latency, server load, network conditions</li>
</ul></li>
<li><p><strong>HTTP/2 and HTTP/3</strong>: Modern protocols with
multiplexing and header compression</p></li>
</ol>
<p><strong>Performance Impact</strong>:</p>
<ul>
<li><strong>Latency</strong>: 70-90% reduction for cached content</li>
<li><strong>Bandwidth</strong>: 80-95% reduction in origin
bandwidth</li>
<li><strong>Availability</strong>: Improved through distributed
architecture</li>
</ul>
<h3 id="q7-what-are-the-security-considerations-for-vpn-connections">Q7:
What are the security considerations for VPN connections?</h3>
<p><strong>A</strong>: Key security considerations:</p>
<ol type="1">
<li><p><strong>Encryption</strong>: Use strong encryption algorithms</p>
<ul>
<li>IKEv2 with AES-256-GCM</li>
<li>Avoid weak ciphers (DES, MD5)</li>
</ul></li>
<li><p><strong>Authentication</strong>: Strong authentication
methods</p>
<ul>
<li>Pre-shared keys (PSK) for site-to-site</li>
<li>Certificates for better security</li>
<li>Multi-factor authentication for client VPN</li>
</ul></li>
<li><p><strong>Key Management</strong>: Secure key storage and
rotation</p>
<ul>
<li>Regular key rotation (every 90 days)</li>
<li>Use key management services (AWS KMS, Azure Key Vault)</li>
</ul></li>
<li><p><strong>Monitoring</strong>: Monitor VPN connections</p>
<ul>
<li>Connection status</li>
<li>Traffic patterns</li>
<li>Failed authentication attempts</li>
</ul></li>
<li><p><strong>Network Segmentation</strong>: Isolate VPN traffic</p>
<ul>
<li>Use separate VPC/subnet for VPN endpoints</li>
<li>Restrict access to necessary resources only</li>
</ul></li>
<li><p><strong>Compliance</strong>: Ensure compliance with
regulations</p>
<ul>
<li>Encrypt data in transit</li>
<li>Log access and activities</li>
<li>Regular security audits</li>
</ul></li>
</ol>
<h3 id="q8-how-does-direct-connect-differ-from-vpn-and-when-should-i-use-each">Q8:
How does Direct Connect differ from VPN, and when should I use
each?</h3>
<p><strong>A</strong>:</p>
<table>
<colgroup>
<col style="width: 31%">
<col style="width: 51%">
<col style="width: 17%">
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Direct Connect</th>
<th>VPN</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Connection Type</strong></td>
<td>Dedicated physical connection</td>
<td>Encrypted tunnel over internet</td>
</tr>
<tr>
<td><strong>Latency</strong></td>
<td>Lower and more consistent</td>
<td>Higher, variable</td>
</tr>
<tr>
<td><strong>Bandwidth</strong></td>
<td>1 Gbps - 100 Gbps</td>
<td>Limited by internet connection</td>
</tr>
<tr>
<td><strong>Cost</strong></td>
<td>Higher (monthly fee + data transfer)</td>
<td>Lower (pay per hour/data)</td>
</tr>
<tr>
<td><strong>Setup Time</strong></td>
<td>Weeks (physical installation)</td>
<td>Minutes (software configuration)</td>
</tr>
<tr>
<td><strong>Reliability</strong></td>
<td>Higher (dedicated circuit)</td>
<td>Depends on internet quality</td>
</tr>
<tr>
<td><strong>Use Case</strong></td>
<td>High-volume, consistent traffic</td>
<td>Low-volume, occasional access</td>
</tr>
</tbody>
</table>
<p><strong>Use Direct Connect when</strong>:</p>
<ul>
<li>High bandwidth requirements (100+ Mbps consistently)</li>
<li>Low latency critical (financial trading, real-time
applications)</li>
<li>Large data transfers (data migration, backups)</li>
<li>Compliance requires private connectivity</li>
</ul>
<p><strong>Use VPN when</strong>:</p>
<ul>
<li>Low to moderate bandwidth needs</li>
<li>Occasional connectivity (backup connection, remote access)</li>
<li>Cost-sensitive scenarios</li>
<li>Quick setup required</li>
</ul>
<h3 id="q9-what-are-the-best-practices-for-cross-region-networking">Q9:
What are the best practices for cross-region networking?</h3>
<p><strong>A</strong>: Best practices:</p>
<ol type="1">
<li><p><strong>Minimize Cross-Region Traffic</strong>:</p>
<ul>
<li>Replicate data to regions where it's accessed</li>
<li>Use regional endpoints for services</li>
<li>Cache content at edge locations</li>
</ul></li>
<li><p><strong>Optimize Data Transfer</strong>:</p>
<ul>
<li>Use compression for data transfers</li>
<li>Batch operations to reduce round trips</li>
<li>Use Direct Connect for high-volume transfers</li>
</ul></li>
<li><p><strong>Implement Failover</strong>:</p>
<ul>
<li>Health checks for each region</li>
<li>Automatic failover to healthy regions</li>
<li>Test failover procedures regularly</li>
</ul></li>
<li><p><strong>Monitor and Alert</strong>:</p>
<ul>
<li>Monitor latency between regions</li>
<li>Track data transfer costs</li>
<li>Set up alerts for connectivity issues</li>
</ul></li>
<li><p><strong>Design for Regional Independence</strong>:</p>
<ul>
<li>Each region should be self-contained</li>
<li>Minimize dependencies between regions</li>
<li>Design for eventual consistency</li>
</ul></li>
<li><p><strong>Cost Optimization</strong>:</p>
<ul>
<li>Use compression and caching</li>
<li>Route traffic efficiently</li>
<li>Consider data transfer costs in architecture decisions</li>
</ul></li>
</ol>
<h3 id="q10-how-do-i-troubleshoot-network-connectivity-issues-in-the-cloud">Q10:
How do I troubleshoot network connectivity issues in the cloud?</h3>
<p><strong>A</strong>: Systematic troubleshooting approach:</p>
<p><strong>Step 1: Verify Instance-Level Configuration</strong>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Check network interface</span></span><br><span class="line">ip addr show</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check routing table</span></span><br><span class="line">ip route show</span><br><span class="line"></span><br><span class="line"><span class="comment"># Test connectivity</span></span><br><span class="line">ping 8.8.8.8</span><br></pre></td></tr></table></figure></p>
<p><strong>Step 2: Check Security Groups</strong> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># List security group rules</span></span><br><span class="line">aws ec2 describe-security-groups --group-ids sg-12345678</span><br><span class="line"></span><br><span class="line"><span class="comment"># Verify rules allow necessary traffic</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Step 3: Check Network ACLs</strong> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># List NACL rules</span></span><br><span class="line">aws ec2 describe-network-acls --network-acl-ids acl-12345678</span><br><span class="line"></span><br><span class="line"><span class="comment"># Verify rules are not blocking traffic</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Step 4: Check Route Tables</strong> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># List route tables</span></span><br><span class="line">aws ec2 describe-route-tables --route-table-ids rtb-12345678</span><br><span class="line"></span><br><span class="line"><span class="comment"># Verify routes are correct</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Step 5: Review VPC Flow Logs</strong> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Query flow logs for rejected traffic</span></span><br><span class="line">aws logs filter-log-events \</span><br><span class="line">    --log-group-name vpc-flow-logs \</span><br><span class="line">    --filter-pattern <span class="string">&quot;REJECT&quot;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Step 6: Test from Different Sources</strong></p>
<ul>
<li>Test from same subnet</li>
<li>Test from different subnet</li>
<li>Test from internet (if applicable)</li>
</ul>
<p><strong>Step 7: Use Network Diagnostic Tools</strong>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Packet capture</span></span><br><span class="line">tcpdump -i eth0 -w capture.pcap</span><br><span class="line"></span><br><span class="line"><span class="comment"># Trace route</span></span><br><span class="line">traceroute destination-ip</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check DNS resolution</span></span><br><span class="line">nslookup example.com</span><br></pre></td></tr></table></figure></p>
<p><strong>Common Issues and Solutions</strong>:</p>
<ul>
<li><strong>No internet access</strong>: Check route table, internet
gateway, NAT gateway</li>
<li><strong>Cannot reach other instances</strong>: Check security
groups, NACLs, route tables</li>
<li><strong>High latency</strong>: Check instance type, network
performance, geographic distance</li>
<li><strong>Intermittent connectivity</strong>: Check for rate limiting,
DDoS protection, health checks</li>
</ul>
<h2 id="summary">Summary</h2>
<p>Cloud networking and Software-Defined Networking represent
fundamental shifts in how we design, deploy, and manage network
infrastructure. From the isolated environments provided by Virtual
Private Clouds to the intelligent traffic distribution of load
balancers, from the global reach of Content Delivery Networks to the
programmability of SDN controllers, modern cloud networking enables
applications that are scalable, secure, and performant.</p>
<p><strong>Key Takeaways</strong>:</p>
<ol type="1">
<li><p><strong>VPC Fundamentals</strong>: Virtual Private Clouds provide
isolated, customizable network environments with multiple layers of
security through security groups and network ACLs.</p></li>
<li><p><strong>Load Balancing</strong>: Modern load balancers (ALB, NLB)
distribute traffic intelligently, improving availability and performance
through health checks and advanced routing.</p></li>
<li><p><strong>Content Delivery</strong>: CDNs bring content closer to
users, dramatically reducing latency and bandwidth costs through
geographic distribution and intelligent caching.</p></li>
<li><p><strong>SDN Revolution</strong>: Software-Defined Networking
separates control from data planes, enabling centralized management,
programmability, and dynamic network configuration.</p></li>
<li><p><strong>NFV Transformation</strong>: Network Functions
Virtualization moves network appliances to software, reducing costs and
increasing flexibility.</p></li>
<li><p><strong>Hybrid Connectivity</strong>: VPN and Direct Connect
enable secure, reliable connections between on-premises and cloud
environments.</p></li>
<li><p><strong>Cross-Region Networking</strong>: Global applications
require careful design to minimize latency, optimize costs, and ensure
high availability across regions.</p></li>
<li><p><strong>Security</strong>: Multiple layers of security (security
groups, NACLs, encryption) protect network traffic and
resources.</p></li>
<li><p><strong>Monitoring and Troubleshooting</strong>: Comprehensive
monitoring and systematic troubleshooting ensure network reliability and
performance.</p></li>
<li><p><strong>Best Practices</strong>: Following best practices for
network design, security, and operations ensures scalable, maintainable
cloud networks.</p></li>
</ol>
<p>As cloud computing continues to evolve, networking remains at its
core. Understanding these concepts and technologies is essential for
building modern, scalable applications that can serve users globally
while maintaining security, performance, and cost efficiency. Whether
you're designing a simple web application or a complex multi-region
system, the principles and technologies covered in this guide provide
the foundation for successful cloud networking implementations.</p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    
    
    
    
    
    
    <ul>
        <li>Post title：Cloud Computing (5): Network Architecture and SDN</li>
        <li>Post author：Chen Kai</li>
        <li>Create time：2024-06-13 00:00:00</li>
        <li>
            Post link：https://www.chenk.top/en/cloud-computing-networking-sdn/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/en/tags/SDN/">#SDN</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/en/tags/VPC/">#VPC</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/en/tags/Cloud-Computing/">#Cloud Computing</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/en/tags/Cloud-Networking/">#Cloud Networking</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/en/tags/Load-Balancing/">#Load Balancing</a>&nbsp;
                    </li>
                
            </ul>
        

        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/en/cloud-computing-operations-devops/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Cloud Computing (7): Operations and DevOps Practices</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/en/cloud-computing-security-privacy/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Cloud Computing (6): Security and Privacy Protection</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;Comments</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: 'p2Cu9MgjoKzo3VmulhNLIusH-gzGzoHsz',
                    appKey: 'QThQHg3c8sVwGpzg9lu8zEG3',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: '😜 尽情赞美帅气伟大的ck吧~',
                    lang: 'en'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return '博主';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'Chen Kai';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>
              -
            
            2026&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Chen Kai</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
            </div>
        
        <div class="theme-info info-item">
            <!-- Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a> -->
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#virtual-private-cloud-vpc-fundamentals"><span class="nav-number">1.</span> <span class="nav-text">Virtual Private Cloud
(VPC) Fundamentals</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#what-is-a-vpc"><span class="nav-number">1.1.</span> <span class="nav-text">What is a VPC?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vpc-architecture-components"><span class="nav-number">1.2.</span> <span class="nav-text">VPC Architecture Components</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vpc-configuration-examples"><span class="nav-number">1.3.</span> <span class="nav-text">VPC Configuration Examples</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vpc-peering-and-connectivity"><span class="nav-number">1.4.</span> <span class="nav-text">VPC Peering and Connectivity</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#load-balancing-slb-elb-and-alb"><span class="nav-number">2.</span> <span class="nav-text">Load Balancing: SLB, ELB, and
ALB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#load-balancer-types"><span class="nav-number">2.1.</span> <span class="nav-text">Load Balancer Types</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#load-balancing-algorithms"><span class="nav-number">2.2.</span> <span class="nav-text">Load Balancing Algorithms</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#load-balancer-health-checks"><span class="nav-number">2.3.</span> <span class="nav-text">Load Balancer Health Checks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#load-balancer-performance-benchmarks"><span class="nav-number">2.4.</span> <span class="nav-text">Load Balancer Performance
Benchmarks</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#content-delivery-networks-cdn"><span class="nav-number">3.</span> <span class="nav-text">Content Delivery Networks
(CDN)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#how-cdns-work"><span class="nav-number">3.1.</span> <span class="nav-text">How CDNs Work</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cdn-architecture"><span class="nav-number">3.2.</span> <span class="nav-text">CDN Architecture</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cdn-configuration-examples"><span class="nav-number">3.3.</span> <span class="nav-text">CDN Configuration Examples</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cdn-performance-metrics"><span class="nav-number">3.4.</span> <span class="nav-text">CDN Performance Metrics</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#software-defined-networking-sdn"><span class="nav-number">4.</span> <span class="nav-text">Software-Defined Networking
(SDN)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#traditional-networking-vs-sdn"><span class="nav-number">4.1.</span> <span class="nav-text">Traditional Networking vs
SDN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sdn-architecture-components"><span class="nav-number">4.2.</span> <span class="nav-text">SDN Architecture Components</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#openflow-protocol"><span class="nav-number">4.3.</span> <span class="nav-text">OpenFlow Protocol</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sdn-controllers"><span class="nav-number">4.4.</span> <span class="nav-text">SDN Controllers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sdn-use-cases"><span class="nav-number">4.5.</span> <span class="nav-text">SDN Use Cases</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#network-functions-virtualization-nfv"><span class="nav-number">5.</span> <span class="nav-text">Network Functions
Virtualization (NFV)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#nfv-architecture"><span class="nav-number">5.1.</span> <span class="nav-text">NFV Architecture</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nfv-benefits"><span class="nav-number">5.2.</span> <span class="nav-text">NFV Benefits</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nfv-implementation-example"><span class="nav-number">5.3.</span> <span class="nav-text">NFV Implementation Example</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nfv-service-chaining"><span class="nav-number">5.4.</span> <span class="nav-text">NFV Service Chaining</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vpn-and-direct-connect"><span class="nav-number">6.</span> <span class="nav-text">VPN and Direct Connect</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#virtual-private-network-vpn"><span class="nav-number">6.1.</span> <span class="nav-text">Virtual Private Network (VPN)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#direct-connect"><span class="nav-number">6.2.</span> <span class="nav-text">Direct Connect</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cross-region-networking"><span class="nav-number">7.</span> <span class="nav-text">Cross-Region Networking</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#challenges"><span class="nav-number">7.1.</span> <span class="nav-text">Challenges</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#solutions"><span class="nav-number">7.2.</span> <span class="nav-text">Solutions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#security-groups-and-network-acls"><span class="nav-number">8.</span> <span class="nav-text">Security Groups and Network
ACLs</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#security-groups"><span class="nav-number">8.1.</span> <span class="nav-text">Security Groups</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#network-acls"><span class="nav-number">8.2.</span> <span class="nav-text">Network ACLs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#security-best-practices"><span class="nav-number">8.3.</span> <span class="nav-text">Security Best Practices</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#network-monitoring-and-troubleshooting"><span class="nav-number">9.</span> <span class="nav-text">Network Monitoring and
Troubleshooting</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#vpc-flow-logs"><span class="nav-number">9.1.</span> <span class="nav-text">VPC Flow Logs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#network-troubleshooting-tools"><span class="nav-number">9.2.</span> <span class="nav-text">Network Troubleshooting
Tools</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#common-network-issues-and-solutions"><span class="nav-number">9.3.</span> <span class="nav-text">Common Network Issues and
Solutions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#case-studies"><span class="nav-number">10.</span> <span class="nav-text">Case Studies</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#case-study-1-e-commerce-platform-migration"><span class="nav-number">10.1.</span> <span class="nav-text">Case Study 1:
E-commerce Platform Migration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#case-study-2-financial-services-sdn-implementation"><span class="nav-number">10.2.</span> <span class="nav-text">Case Study
2: Financial Services SDN Implementation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#case-study-3-media-streaming-platform-with-global-cdn"><span class="nav-number">10.3.</span> <span class="nav-text">Case
Study 3: Media Streaming Platform with Global CDN</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#qa-cloud-networking-and-sdn"><span class="nav-number">11.</span> <span class="nav-text">Q&amp;A: Cloud Networking and
SDN</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#q1-whats-the-difference-between-security-groups-and-network-acls"><span class="nav-number">11.1.</span> <span class="nav-text">Q1:
What&#39;s the difference between Security Groups and Network ACLs?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#q2-how-do-i-choose-between-network-load-balancer-and-application-load-balancer"><span class="nav-number">11.2.</span> <span class="nav-text">Q2:
How do I choose between Network Load Balancer and Application Load
Balancer?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#q3-what-is-the-difference-between-vpc-peering-and-transit-gateway"><span class="nav-number">11.3.</span> <span class="nav-text">Q3:
What is the difference between VPC Peering and Transit Gateway?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#q4-how-does-sdn-improve-network-management-compared-to-traditional-networking"><span class="nav-number">11.4.</span> <span class="nav-text">Q4:
How does SDN improve network management compared to traditional
networking?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#q5-what-are-the-main-components-of-nfv-architecture"><span class="nav-number">11.5.</span> <span class="nav-text">Q5: What
are the main components of NFV architecture?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#q6-how-do-cdns-reduce-latency-and-improve-performance"><span class="nav-number">11.6.</span> <span class="nav-text">Q6: How
do CDNs reduce latency and improve performance?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#q7-what-are-the-security-considerations-for-vpn-connections"><span class="nav-number">11.7.</span> <span class="nav-text">Q7:
What are the security considerations for VPN connections?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#q8-how-does-direct-connect-differ-from-vpn-and-when-should-i-use-each"><span class="nav-number">11.8.</span> <span class="nav-text">Q8:
How does Direct Connect differ from VPN, and when should I use
each?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#q9-what-are-the-best-practices-for-cross-region-networking"><span class="nav-number">11.9.</span> <span class="nav-text">Q9:
What are the best practices for cross-region networking?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#q10-how-do-i-troubleshoot-network-connectivity-issues-in-the-cloud"><span class="nav-number">11.10.</span> <span class="nav-text">Q10:
How do I troubleshoot network connectivity issues in the cloud?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#summary"><span class="nav-number">12.</span> <span class="nav-text">Summary</span></a></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>

<script src="/js/lang-switch.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-copy.js"></script>





<div class="post-scripts pjax">
    
        
<script src="/js/left-side-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
