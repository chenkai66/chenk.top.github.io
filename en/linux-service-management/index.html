<!DOCTYPE html>



<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Chen Kai">
    
    <title>
        
            Linux Service Management: systemd, systemctl, and journald Deep Dive |
        
        Chen Kai Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"chenk.top","root":"/","language":"en","default_language":"zh-CN","languages":["zh-CN","en"],"path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.svg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":false},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Chen Kai Blog" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    
    
    
    
    

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/en/">
                Chen Kai Blog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/categories"
                            >
                                CATEGORIES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/tags"
                            >
                                TAGS
                            </a>
                        </li>
                    
                    <li class="menu-item lang-switch lang-switch-trigger" title="Language">
                        <i class="fas fa-globe"></i>
                    </li>
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item lang-switch-trigger"><i class="fas fa-globe"></i></div>
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/categories">CATEGORIES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/tags">TAGS</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    
    
    
    

    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Linux Service Management: systemd, systemctl, and journald Deep Dive</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Chen Kai</span>
                        
                            <span class="author-label">BOSS</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    
    
    
    
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2025-01-06 00:00:00</span>
        <span class="mobile">2025-01-06 00:00</span>
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/en/tags/Linux/">Linux</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/en/tags/Cloud/">Cloud</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>3.4k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>21 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <p>In operating systems, a "service" refers to a background resident
process or daemon—programs that automatically start when the system
boots, work silently in the background, and provide various functions
(such as time synchronization, firewalls, scheduled tasks, web servers,
databases, etc.). Modern Linux uses <strong>systemd</strong> to
uniformly manage these services, providing powerful dependency
management, parallel startup, log integration, and more. This post
starts from systemd's core concepts, dives deep into
<code>systemctl</code> command usage, explains configuration and
troubleshooting for common services (time synchronization, firewall,
cron, SSH), and teaches you how to create custom services and make your
own programs start automatically on boot. If you're a sysadmin or need
to manage Linux servers, this article will upgrade you from "can
start/stop services" to "can write custom services, can troubleshoot,
can optimize startup order."</p>
<span id="more"></span>
<h1 id="systemd-core-concepts-why-use-it-what-problems-does-it-solve">systemd
Core Concepts: Why Use It, What Problems Does It Solve</h1>
<h2 id="why-we-need-a-service-manager">Why We Need a Service
Manager</h2>
<p>In operating systems, a "service" refers to those programs that run
in the background for extended periods, providing certain functions to
the system or users. Examples include: - <strong>Time synchronization
service</strong> (ntpd / ntpsec): Periodically syncs with time servers
to ensure system clock accuracy - <strong>Firewall service</strong>
(firewalld / iptables): Controls network traffic, protects system
security - <strong>SSH service</strong> (sshd): Allows remote login -
<strong>Web server</strong> (nginx / apache): Handles HTTP requests,
provides website access - <strong>Database service</strong> (mysql /
postgresql): Stores and queries data - <strong>Cron service</strong>
(crond): Automatically executes scripts according to schedule</p>
<p>These services typically need: 1. <strong>Auto-start on boot</strong>
(no manual start needed) 2. <strong>Auto-restart after crash</strong>
(improves availability) 3. <strong>Dependency management</strong> (e.g.,
web service depends on network service, network service depends on
network card driver) 4. <strong>Log integration</strong> (easier
troubleshooting) 5. <strong>Resource limits</strong> (prevent a service
from consuming too much CPU/memory)</p>
<p>A <strong>service manager</strong> is the tool used to uniformly
manage these services.</p>
<h2 id="systemd-vs-sysv-init-legacy-systems">systemd vs SysV init
(Legacy Systems)</h2>
<p>Before systemd appeared, Linux used <strong>SysV init</strong> as the
service manager (CentOS 6, Ubuntu 14.04 and earlier). Its
characteristics: - Service scripts located in <code>/etc/init.d/</code>
directory - Used <code>service &lt;service&gt; start/stop/restart</code>
to manage services - Used <code>chkconfig</code> to configure auto-start
on boot - <strong>Serial startup</strong>: Services start one by one in
order, slow (especially when there are many services) -
<strong>Dependency relationships handled manually in scripts</strong>:
Error-prone</p>
<p><strong>systemd</strong> is the service manager for modern Linux
distributions (CentOS 7+, Ubuntu 16.04+, Debian 8+), with advantages: -
<strong>Parallel startup</strong>: Multiple services start
simultaneously, much faster - <strong>Automatic dependency
handling</strong>: systemd knows service dependencies, automatically
starts in order - <strong>Unified logging system</strong> (journald):
All service logs centrally managed, easy to query - <strong>Socket
activation</strong>: Some services can start on-demand (only start when
there's a connection, saves resources) - <strong>Cgroup
integration</strong>: Can limit service CPU/memory usage -
<strong>Unified commands</strong>: <code>systemctl</code> one command
manages all services</p>
<p><strong>Compatibility</strong>: systemd is backward compatible with
SysV init commands (<code>service</code> and <code>chkconfig</code>
still work on systemd systems, but internally call systemctl).</p>
<h2 id="systemd-core-concept-unit">systemd Core Concept: unit</h2>
<p>In systemd, <strong>everything is a unit</strong>. A unit is
systemd's smallest management unit. Common unit types:</p>
<table>
<colgroup>
<col style="width: 15%">
<col style="width: 56%">
<col style="width: 27%">
</colgroup>
<thead>
<tr>
<th>Unit Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>service</strong></td>
<td>Most common type, represents a background service (process)</td>
<td><code>sshd.service</code>, <code>nginx.service</code></td>
</tr>
<tr>
<td><strong>socket</strong></td>
<td>Represents an IPC or network socket for on-demand service
activation</td>
<td><code>sshd.socket</code>, <code>docker.socket</code></td>
</tr>
<tr>
<td><strong>target</strong></td>
<td>Represents a group of units (similar to SysV runlevel)</td>
<td><code>multi-user.target</code>, <code>graphical.target</code></td>
</tr>
<tr>
<td><strong>mount</strong></td>
<td>Represents a mount point (filesystem)</td>
<td><code>home.mount</code>, <code>tmp.mount</code></td>
</tr>
<tr>
<td><strong>timer</strong></td>
<td>Represents a scheduled task (replaces cron)</td>
<td><code>logrotate.timer</code>, <code>apt-daily.timer</code></td>
</tr>
<tr>
<td><strong>device</strong></td>
<td>Represents a device (like USB, network card)</td>
<td><code>dev-sda.device</code></td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>Monitors file/directory changes, triggers service startup</td>
<td><code>systemd-tmpfiles-clean.path</code></td>
</tr>
</tbody>
</table>
<p><strong>Most commonly used is the service type</strong>
(<code>.service</code> suffix), so when we talk about "services," we
usually mean service units.</p>
<h2 id="systemd-startup-process-overview">systemd Startup Process
Overview</h2>
<ol type="1">
<li><strong>Kernel boots</strong>: After kernel loads, starts systemd
(PID 1, first user-space process)</li>
<li><strong>systemd reads config</strong>: Reads unit files from
<code>/etc/systemd/system/</code> and
<code>/usr/lib/systemd/system/</code></li>
<li><strong>Determines startup target</strong>: Usually
<code>multi-user.target</code> (multi-user text mode) or
<code>graphical.target</code> (graphical interface)</li>
<li><strong>Parses dependencies</strong>: Based on
<code>Requires</code>, <code>After</code>, <code>Before</code> fields in
unit files, determines startup order</li>
<li><strong>Starts services in parallel</strong>: Simultaneously starts
multiple services with no dependencies (improves startup speed)</li>
<li><strong>Enters target state</strong>: After all dependent services
start, system enters target state (like login prompt)</li>
</ol>
<hr>
<h1 id="systemctl-commands-the-muscle-memory-of-daily-use">systemctl
Commands: The "Muscle Memory" of Daily Use</h1>
<p><code>systemctl</code> is systemd's main command-line tool for
managing services. This section covers the commands you'll use most
frequently in daily operations.</p>
<h2 id="basic-operations-start-stop-restart-check-status">Basic
Operations (Start, Stop, Restart, Check Status)</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Start service (takes effect immediately, but doesn&#x27;t persist after reboot)</span></span><br><span class="line">systemctl start &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Stop service</span></span><br><span class="line">systemctl stop &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Restart service (stops then starts)</span></span><br><span class="line">systemctl restart &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reload config files (doesn&#x27;t stop service, suitable for services that support hot reload like nginx)</span></span><br><span class="line">systemctl reload &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check service status (whether running, PID, recent logs, auto-start on boot)</span></span><br><span class="line">systemctl status &lt;service&gt;</span><br></pre></td></tr></table></figure>
<p><strong>Examples</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start sshd       <span class="comment"># Start SSH service</span></span><br><span class="line">systemctl status sshd      <span class="comment"># Check SSH service status</span></span><br><span class="line">systemctl reload nginx     <span class="comment"># Reload nginx config (without stopping service)</span></span><br></pre></td></tr></table></figure></p>
<h2 id="auto-start-on-boot-management">Auto-Start on Boot
Management</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Enable auto-start on boot (creates symlink to /etc/systemd/system/multi-user.target.wants/)</span></span><br><span class="line">systemctl <span class="built_in">enable</span> &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable auto-start on boot (removes symlink)</span></span><br><span class="line">systemctl <span class="built_in">disable</span> &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if service is enabled for auto-start</span></span><br><span class="line">systemctl is-enabled &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># One-step: start service + enable auto-start</span></span><br><span class="line">systemctl <span class="built_in">enable</span> --now &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># One-step: stop service + disable auto-start</span></span><br><span class="line">systemctl <span class="built_in">disable</span> --now &lt;service&gt;</span><br></pre></td></tr></table></figure>
<p><strong>Examples</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> sshd      <span class="comment"># Enable SSH service auto-start on boot</span></span><br><span class="line">systemctl is-enabled sshd  <span class="comment"># Output: enabled</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld  <span class="comment"># Disable firewall auto-start on boot</span></span><br></pre></td></tr></table></figure></p>
<h2 id="view-service-lists">View Service Lists</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># List all running services</span></span><br><span class="line">systemctl list-units --<span class="built_in">type</span>=service --state=running</span><br><span class="line"></span><br><span class="line"><span class="comment"># List all services (including not running)</span></span><br><span class="line">systemctl list-units --<span class="built_in">type</span>=service --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># List all failed services</span></span><br><span class="line">systemctl list-units --<span class="built_in">type</span>=service --state=failed</span><br><span class="line"></span><br><span class="line"><span class="comment"># Search for specific service (like services containing ssh)</span></span><br><span class="line">systemctl list-units --<span class="built_in">type</span>=service --all | grep ssh</span><br></pre></td></tr></table></figure>
<p><strong>Example output</strong>: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">● sshd.service    loaded active running OpenBSD Secure Shell server</span><br><span class="line">● nginx.service   loaded active running A high performance web server</span><br></pre></td></tr></table></figure></p>
<h2 id="view-service-details">View Service Details</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># View service unit file content</span></span><br><span class="line">systemctl <span class="built_in">cat</span> &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># View service dependencies</span></span><br><span class="line">systemctl list-dependencies &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># View service startup time (performance analysis)</span></span><br><span class="line">systemd-analyze blame</span><br><span class="line">systemd-analyze critical-chain &lt;service&gt;</span><br></pre></td></tr></table></figure>
<p><strong>Examples</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">cat</span> sshd.service  <span class="comment"># View sshd unit file</span></span><br><span class="line">systemctl list-dependencies sshd.service  <span class="comment"># View what services sshd depends on</span></span><br><span class="line">systemd-analyze blame  <span class="comment"># View all services&#x27; startup time (sorted by duration)</span></span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="custom-services-making-your-programs-auto-start-on-boot">Custom
Services: Making Your Programs Auto-Start on Boot</h1>
<p>Suppose you have a Python script or compiled binary program that you
want to auto-start on boot and auto-restart after crashes. How? Write a
systemd unit file.</p>
<h2 id="minimal-working-example">Minimal Working Example</h2>
<p>Suppose you have a script <code>/usr/local/bin/myapp.sh</code>:
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;MyApp is running...&quot;</span></span><br><span class="line">    <span class="built_in">sleep</span> 10</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<p>Create unit file <code>/etc/systemd/system/myapp.service</code>:
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=My Custom Application</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">ExecStart</span>=/usr/local/bin/myapp.sh</span><br><span class="line"><span class="attr">Restart</span>=always</span><br><span class="line"><span class="attr">RestartSec</span>=<span class="number">10</span></span><br><span class="line"><span class="attr">User</span>=nobody</span><br><span class="line"><span class="attr">Group</span>=nogroup</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure></p>
<p>Then start and enable: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload  <span class="comment"># Reload systemd config</span></span><br><span class="line">sudo systemctl start myapp</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> myapp</span><br><span class="line">sudo systemctl status myapp</span><br></pre></td></tr></table></figure></p>
<h2 id="unit-file-explained">Unit File Explained</h2>
<h3 id="unit-section-description-and-dependencies">[Unit] Section
(Description and Dependencies)</h3>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=My Custom Application  <span class="comment"># Description (shown in systemctl status)</span></span><br><span class="line"><span class="attr">After</span>=network.target               <span class="comment"># Start after network service</span></span><br><span class="line"><span class="attr">Before</span>=another.service             <span class="comment"># Start before another service</span></span><br><span class="line"><span class="attr">Requires</span>=some.service              <span class="comment"># Strong dependency (if dependency fails, this service fails)</span></span><br><span class="line"><span class="attr">Wants</span>=some.service                 <span class="comment"># Weak dependency (if dependency fails, this service still tries to start)</span></span><br></pre></td></tr></table></figure>
<h3 id="service-section-service-startup-method-and-behavior">[Service]
Section (Service Startup Method and Behavior)</h3>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple                        <span class="comment"># Most common type (considered ready after start)</span></span><br><span class="line"><span class="comment"># Type=forking                     # Suitable for services that fork to background (like traditional daemons)</span></span><br><span class="line"><span class="comment"># Type=oneshot                     # Suitable for one-time execution tasks (like init scripts)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ExecStart</span>=/usr/local/bin/myapp.sh  <span class="comment"># Start command (must be absolute path)</span></span><br><span class="line"><span class="attr">ExecReload</span>=/bin/kill -HUP <span class="variable">$MAINPID</span> <span class="comment"># Reload config (optional)</span></span><br><span class="line"><span class="attr">ExecStop</span>=/bin/kill -TERM <span class="variable">$MAINPID</span>  <span class="comment"># Stop command (optional, default sends SIGTERM)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Restart</span>=always                     <span class="comment"># Auto-restart after crash (always / on-failure / no)</span></span><br><span class="line"><span class="attr">RestartSec</span>=<span class="number">10</span>                      <span class="comment"># Wait 10 seconds before restart</span></span><br><span class="line"></span><br><span class="line"><span class="attr">User</span>=nobody                        <span class="comment"># Which user to run as (security, don&#x27;t use root)</span></span><br><span class="line"><span class="attr">Group</span>=nogroup                      <span class="comment"># Which group to run as</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Resource limits</span></span><br><span class="line"><span class="attr">LimitNOFILE</span>=<span class="number">65536</span>                  <span class="comment"># Max open files</span></span><br><span class="line"><span class="attr">LimitNPROC</span>=<span class="number">4096</span>                    <span class="comment"># Max processes</span></span><br><span class="line"><span class="attr">MemoryLimit</span>=<span class="number">512</span>M                   <span class="comment"># Memory limit (requires cgroup v2 support)</span></span><br><span class="line"><span class="attr">CPUQuota</span>=<span class="number">50</span>%                       <span class="comment"># CPU limit (50% means max 0.5 core)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Working directory</span></span><br><span class="line"><span class="attr">WorkingDirectory</span>=/var/lib/myapp    <span class="comment"># Working directory at startup</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Environment variables</span></span><br><span class="line"><span class="attr">Environment</span>=<span class="string">&quot;VAR1=value1&quot;</span></span><br><span class="line"><span class="attr">Environment</span>=<span class="string">&quot;VAR2=value2&quot;</span></span><br><span class="line"><span class="attr">EnvironmentFile</span>=/etc/myapp/env     <span class="comment"># Load environment variables from file</span></span><br></pre></td></tr></table></figure>
<h3 id="install-section-auto-start-configuration">[Install] Section
(Auto-Start Configuration)</h3>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target         <span class="comment"># Start in multi-user mode (text mode)</span></span><br><span class="line"><span class="comment"># WantedBy=graphical.target        # Start in graphical mode</span></span><br></pre></td></tr></table></figure>
<h2 id="common-type-differences">Common Type Differences</h2>
<table>
<colgroup>
<col style="width: 8%">
<col style="width: 62%">
<col style="width: 29%">
</colgroup>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>simple</strong></td>
<td>Considered ready immediately after start (default)</td>
<td>Most services (like nginx, python scripts)</td>
</tr>
<tr>
<td><strong>forking</strong></td>
<td>Service forks a child process then exits (parent exits, child
becomes main process)</td>
<td>Traditional daemon programs (like old Apache)</td>
</tr>
<tr>
<td><strong>oneshot</strong></td>
<td>Exits after execution (not a resident process)</td>
<td>One-time init tasks (like mounting filesystems)</td>
</tr>
<tr>
<td><strong>notify</strong></td>
<td>Service actively notifies systemd "I'm ready" after start (requires
program support for sd_notify)</td>
<td>Advanced services (like systemd-networkd)</td>
</tr>
</tbody>
</table>
<h2 id="must-reload-after-modifying-unit-file">Must Reload After
Modifying Unit File</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload  <span class="comment"># Tell systemd to re-read unit files</span></span><br><span class="line">sudo systemctl restart myapp</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="journalctl-systemds-unified-logging-system">journalctl:
systemd's Unified Logging System</h1>
<p>systemd comes with <strong>journald</strong>; all service logs are
centrally stored in <code>/var/log/journal/</code> or
<code>/run/log/journal/</code> (cleared after reboot). Query with
<code>journalctl</code>.</p>
<h2 id="basic-usage">Basic Usage</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># View all logs (earliest to newest)</span></span><br><span class="line">journalctl</span><br><span class="line"></span><br><span class="line"><span class="comment"># View logs for a specific service</span></span><br><span class="line">journalctl -u &lt;service&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Real-time view logs (like tail -f)</span></span><br><span class="line">journalctl -u &lt;service&gt; -f</span><br><span class="line"></span><br><span class="line"><span class="comment"># View last N lines of logs</span></span><br><span class="line">journalctl -u &lt;service&gt; -n 50</span><br><span class="line"></span><br><span class="line"><span class="comment"># View logs from last 1 hour</span></span><br><span class="line">journalctl -u &lt;service&gt; --since <span class="string">&quot;1 hour ago&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># View logs for a time period</span></span><br><span class="line">journalctl -u &lt;service&gt; --since <span class="string">&quot;2025-02-01 00:00:00&quot;</span> --until <span class="string">&quot;2025-02-01 23:59:59&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># View boot logs</span></span><br><span class="line">journalctl -b  <span class="comment"># -b 0 means current boot, -b -1 means previous boot</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># View kernel logs</span></span><br><span class="line">journalctl -k</span><br></pre></td></tr></table></figure>
<h2 id="advanced-usage">Advanced Usage</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># View logs with detailed info (including PID, UID, etc.)</span></span><br><span class="line">journalctl -u &lt;service&gt; -o verbose</span><br><span class="line"></span><br><span class="line"><span class="comment"># View logs showing only errors and more severe messages</span></span><br><span class="line">journalctl -u &lt;service&gt; -p err</span><br><span class="line"></span><br><span class="line"><span class="comment"># View all logs for a specific user</span></span><br><span class="line">journalctl _UID=1000</span><br><span class="line"></span><br><span class="line"><span class="comment"># View logs for a specific executable</span></span><br><span class="line">journalctl /usr/bin/python3</span><br><span class="line"></span><br><span class="line"><span class="comment"># Clean logs (keep last 7 days)</span></span><br><span class="line">journalctl --vacuum-time=7d</span><br><span class="line"></span><br><span class="line"><span class="comment"># Clean logs (keep last 1GB)</span></span><br><span class="line">journalctl --vacuum-size=1G</span><br></pre></td></tr></table></figure>
<h2 id="log-persistence">Log Persistence</h2>
<p>By default, journald logs are stored in
<code>/run/log/journal/</code> (in memory, cleared after reboot). To
persist logs:</p>
<ol type="1">
<li><p>Create directory: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> -p /var/log/journal</span><br><span class="line">sudo systemd-tmpfiles --create --prefix /var/log/journal</span><br></pre></td></tr></table></figure></p></li>
<li><p>Restart journald: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart systemd-journald</span><br></pre></td></tr></table></figure></p></li>
</ol>
<p>Afterward, logs will be saved in <code>/var/log/journal/</code>,
persisting after reboot.</p>
<hr>
<h1 id="common-service-configuration-and-troubleshooting">Common Service
Configuration and Troubleshooting</h1>
<p>This section explains configuration and troubleshooting methods for
several of the most common system services.</p>
<h2 id="time-synchronization-service-ntpd-ntpsec-timedatectl">Time
Synchronization Service (ntpd / ntpsec / timedatectl)</h2>
<h3 id="why-time-synchronization-is-needed">Why Time Synchronization Is
Needed</h3>
<p>In distributed systems, clusters, log analysis, and other application
scenarios, time synchronization is critical: - <strong>Scheduled task
execution</strong> (like cron jobs): If time is inconsistent, tasks may
execute early or late - <strong>Log comparison and analysis</strong>: If
multiple servers have inconsistent time, log timestamps will be chaotic,
impossible to correlate - <strong>Data synchronization</strong> (like
database master-slave replication): Inconsistent time can cause data
order confusion - <strong>Security protocols</strong> (like Kerberos
authentication, TLS certificates): Too large time差 causes
authentication failure</p>
<h3 id="solution-1-using-ntpsec-recommended">Solution 1: Using ntpsec
(Recommended)</h3>
<p><strong>ntpsec</strong> is the modernized version of traditional
ntpd, with higher security and cleaner code.</p>
<p><strong>Install and start</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ntpsec  <span class="comment"># Debian/Ubuntu</span></span><br><span class="line">sudo yum install ntpsec  <span class="comment"># CentOS/RHEL</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> --now ntpsec</span><br></pre></td></tr></table></figure></p>
<p><strong>Configuration</strong>: Edit
<code>/etc/ntpsec/ntp.conf</code>, add time servers (recommend using
domestic servers for lower latency): <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server ntp.aliyun.com iburst prefer</span><br><span class="line">server ntp.tencent.com iburst</span><br><span class="line">server cn.pool.ntp.org iburst</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>iburst</code>: Fast sync at startup (sends 8 packets instead
of 1)</li>
<li><code>prefer</code>: Prioritize this server</li>
</ul>
<p>Restart service: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart ntpsec</span><br></pre></td></tr></table></figure></p>
<p><strong>Check sync status</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ntpq -p  <span class="comment"># View currently connected time servers</span></span><br></pre></td></tr></table></figure></p>
<h3 id="solution-2-using-timedatectl-simpler">Solution 2: Using
timedatectl (Simpler)</h3>
<p><strong>timedatectl</strong> is systemd's built-in time management
tool, using <code>systemd-timesyncd</code> for NTP synchronization
underneath.</p>
<p><strong>Enable NTP sync</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo timedatectl set-ntp <span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Check status</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timedatectl</span><br></pre></td></tr></table></figure></p>
<p>Example output: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">               Local time: Mon 2025-02-03 12:00:00 UTC</span><br><span class="line">           Universal time: Mon 2025-02-03 12:00:00 UTC</span><br><span class="line">                 RTC time: Mon 2025-02-03 12:00:00</span><br><span class="line">                Time zone: UTC (UTC, +0000)</span><br><span class="line">System clock synchronized: yes</span><br><span class="line">              NTP service: active</span><br><span class="line">          RTC in local TZ: no</span><br></pre></td></tr></table></figure></p>
<p><strong>Set timezone</strong> (if needed): <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo timedatectl set-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure></p>
<p><strong>View available timezones</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timedatectl list-timezones | grep Shanghai</span><br></pre></td></tr></table></figure></p>
<h3 id="ntpdate-one-time-sync-not-recommended-for-resident-use">ntpdate
(One-Time Sync, Not Recommended for Resident Use)</h3>
<p>If you only need to sync time once temporarily (not a resident
service): <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ntpdate ntp.aliyun.com</span><br></pre></td></tr></table></figure></p>
<p><strong>Disadvantages</strong>: - Brutally modifies time (direct
jump), may cause errors in time-dependent programs (like cron, database
sync) - ntpd / ntpsec uses smooth adjustment, avoids time jumps</p>
<p><strong>Recommendation</strong>: Use ntpsec or timedatectl for
long-running synchronization, avoid ntpdate's issues.</p>
<hr>
<h2 id="firewall-service-firewalld">Firewall Service (firewalld)</h2>
<h3 id="basic-introduction">Basic Introduction</h3>
<p>Firewall is a network security tool used to <strong>control and
filter network traffic</strong>, preventing unauthorized access. Common
firewalls in Linux: - <strong>iptables</strong> (traditional, rules are
ordered, complex configuration) - <strong>firewalld</strong> (modern,
dynamic rules, supports zone concept, RHEL/CentOS default) -
<strong>ufw</strong> (Ubuntu-friendly firewall, simplified iptables)</p>
<p><strong>firewalld</strong> is a dynamic firewall based on
iptables/nftables, providing a friendlier command-line interface.</p>
<h3 id="enable-and-disable">Enable and Disable</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start firewalld</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> firewalld</span><br><span class="line">sudo systemctl status firewalld</span><br><span class="line"></span><br><span class="line">sudo systemctl stop firewalld</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure>
<h3 id="basic-rule-operations">Basic Rule Operations</h3>
<h4 id="openclose-ports">Open/Close Ports</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Open port 80 (TCP)</span></span><br><span class="line">sudo firewall-cmd --permanent --add-port=80/tcp</span><br><span class="line">sudo firewall-cmd --reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># Open port range 80-90</span></span><br><span class="line">sudo firewall-cmd --permanent --add-port=80-90/tcp</span><br><span class="line">sudo firewall-cmd --reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># Close port 80</span></span><br><span class="line">sudo firewall-cmd --permanent --remove-port=80/tcp</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<ul>
<li><code>--permanent</code>: Write permanent rule (otherwise expires
after reboot)</li>
<li><code>--reload</code>: Reload rules (make permanent rules take
effect)</li>
</ul>
<h4 id="openclose-services">Open/Close Services</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Open HTTP service (includes port 80)</span></span><br><span class="line">sudo firewall-cmd --permanent --add-service=http</span><br><span class="line">sudo firewall-cmd --reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># View currently open services and ports</span></span><br><span class="line">sudo firewall-cmd --list-all</span><br></pre></td></tr></table></figure>
<p><strong>Common service names</strong>: <code>http</code>,
<code>https</code>, <code>ssh</code>, <code>ntp</code>,
<code>mysql</code>, <code>postgresql</code>, etc.</p>
<h3 id="zone-concept">zone Concept</h3>
<p>firewalld uses <strong>zones</strong> to define different security
levels:</p>
<table>
<colgroup>
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 41%">
<col style="width: 33%">
</colgroup>
<thead>
<tr>
<th>Zone Name</th>
<th>Trust Level</th>
<th>Default Policy</th>
<th>Typical Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>drop</strong></td>
<td>Lowest</td>
<td>Drop all incoming traffic, no response</td>
<td>Highest security, completely hide device</td>
</tr>
<tr>
<td><strong>public</strong></td>
<td>Low</td>
<td>Default deny all inbound, only allow SSH</td>
<td>Public networks (like WiFi hotspots)</td>
</tr>
<tr>
<td><strong>work</strong></td>
<td>High</td>
<td>Allow trusted internal network access, default allow SSH, Samba</td>
<td>Company internal network</td>
</tr>
<tr>
<td><strong>home</strong></td>
<td>High</td>
<td>Allow home network access</td>
<td>Home network</td>
</tr>
<tr>
<td><strong>trusted</strong></td>
<td>Highest</td>
<td>Allow all traffic</td>
<td>Completely trusted environment</td>
</tr>
</tbody>
</table>
<p><strong>View current default zone</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --get-default-zone</span><br></pre></td></tr></table></figure></p>
<p><strong>Change default zone</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --set-default-zone=work</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="scheduled-tasks-crontab">Scheduled Tasks (crontab)</h2>
<p>Scheduled tasks allow the system to automatically execute certain
scripts or commands at specified times, for example: - Scheduled
database backup (every day at 2 AM) - Scheduled log file or temp folder
cleanup (every Sunday) - Scheduled time sync (every hour)</p>
<h3 id="edit-and-view">Edit and View</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">crontab -e  <span class="comment"># Edit current user&#x27;s scheduled tasks</span></span><br><span class="line">crontab -l  <span class="comment"># View current user&#x27;s scheduled tasks</span></span><br><span class="line">crontab -r  <span class="comment"># Delete all of current user&#x27;s scheduled tasks</span></span><br></pre></td></tr></table></figure>
<h3 id="format">Format</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MIN HOUR DAY MONTH WEEKDAY command</span><br></pre></td></tr></table></figure>
<ul>
<li><code>MIN</code>: Minutes (0-59)</li>
<li><code>HOUR</code>: Hours (0-23)</li>
<li><code>DAY</code>: Day of month (1-31)</li>
<li><code>MONTH</code>: Month (1-12)</li>
<li><code>WEEKDAY</code>: Day of week (0-7, 0 and 7 both represent
Sunday)</li>
<li><code>command</code>: Command to execute (recommend using absolute
paths)</li>
</ul>
<p><strong>Special symbols</strong>: - <code>*</code>: Represents
"every" (like <code>*</code> in minutes means every minute) -
<code>-</code>: Represents range (like <code>1-5</code> means 1 to 5) -
<code>/</code>: Represents interval (like <code>*/10</code> means every
10 units) - <code>,</code>: Represents multiple values (like
<code>1,2,6</code> means 1, 2, 6)</p>
<h3 id="examples">Examples</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Run backup script daily at 1:30 AM</span></span><br><span class="line">30 1 * * * /usr/local/bin/backup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sync time daily at 2:30 AM (redirect output to null, no output)</span></span><br><span class="line">30 2 * * * /usr/sbin/ntpdate -u ntp.aliyun.com &amp;&gt; /dev/null</span><br><span class="line"></span><br><span class="line"><span class="comment"># Execute at 5 minutes past every hour</span></span><br><span class="line">5 * * * * /usr/local/bin/hourly-task.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># Execute every 10 minutes</span></span><br><span class="line">*/10 * * * * /usr/local/bin/monitor.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># Execute every Sunday at 3 AM</span></span><br><span class="line">0 3 * * 0 /usr/local/bin/weekly-cleanup.sh</span><br></pre></td></tr></table></figure>
<h3 id="view-logs">View Logs</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep CRON /var/log/syslog  <span class="comment"># Debian/Ubuntu</span></span><br><span class="line">grep CRON /var/log/cron    <span class="comment"># CentOS/RHEL</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="ssh-service-configuration-and-security-hardening">SSH Service
Configuration and Security Hardening</h2>
<p>SSH is the standard way to remotely manage Linux servers. In "Linux
Basics" we already covered basic usage (<code>ssh user@host</code>,
password-free login); here we cover some <strong>sshd configuration and
security hardening</strong>.</p>
<h3 id="configuration-file">Configuration File</h3>
<p><strong>Configuration file</strong>:
<code>/etc/ssh/sshd_config</code></p>
<p>After modification, restart service: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart sshd</span><br></pre></td></tr></table></figure></p>
<h3 id="common-configuration-items">Common Configuration Items</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Listening port (default 22, recommend changing to another port to reduce scanning)</span></span><br><span class="line">Port 22222</span><br><span class="line"></span><br><span class="line"><span class="comment"># Whether to allow root user direct login (recommend disabling)</span></span><br><span class="line">PermitRootLogin no</span><br><span class="line"></span><br><span class="line"><span class="comment"># Whether to allow password login (recommend disabling, only use key login)</span></span><br><span class="line">PasswordAuthentication no</span><br><span class="line"></span><br><span class="line"><span class="comment"># Whether to allow empty password login (strongly recommend disabling)</span></span><br><span class="line">PermitEmptyPasswords no</span><br><span class="line"></span><br><span class="line"><span class="comment"># Allow public key authentication</span></span><br><span class="line">PubkeyAuthentication <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Public key file location</span></span><br><span class="line">AuthorizedKeysFile .ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># Whether to allow X11 forwarding (graphical interface forwarding)</span></span><br><span class="line">X11Forwarding <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Max authentication attempts (prevent brute force)</span></span><br><span class="line">MaxAuthTries 3</span><br><span class="line"></span><br><span class="line"><span class="comment"># Idle timeout (seconds)</span></span><br><span class="line">ClientAliveInterval 300</span><br><span class="line">ClientAliveCountMax 0</span><br></pre></td></tr></table></figure>
<h3 id="security-hardening-recommendations">Security Hardening
Recommendations</h3>
<ol type="1">
<li><strong>Change port</strong>: Change default port 22 to another
(like 22222), reduce scan probability</li>
<li><strong>Disable root login</strong>:
<code>PermitRootLogin no</code>, only allow regular user login, use
<code>sudo</code> when permissions needed</li>
<li><strong>Disable password login</strong>:
<code>PasswordAuthentication no</code>, only allow key login (prevent
brute force)</li>
<li><strong>Install fail2ban</strong>: Automatically ban brute force IPs
(auto-ban after consecutive failures)</li>
<li><strong>Configure firewall</strong>: Only allow specific IPs to
connect to SSH (if you have fixed IPs)</li>
<li><strong>Use SSH keys</strong>: 4096-bit RSA or Ed25519 keys (much
more secure than passwords)</li>
</ol>
<hr>
<h1 id="service-troubleshooting-process-what-to-do-when-service-wont-start">Service
Troubleshooting Process: What to Do When Service Won't Start</h1>
<p>When a service won't start, follow this troubleshooting process:</p>
<h2 id="check-service-status">1. Check Service Status</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status &lt;service&gt;</span><br></pre></td></tr></table></figure>
<p>Focus on: - <strong>Active</strong>: Whether it shows
<code>active (running)</code> or <code>failed</code> - <strong>Main
PID</strong>: Main process PID (if 0, process has exited) -
<strong>Recent logs</strong>: Usually shows last few lines of logs,
check for error messages</p>
<h2 id="view-detailed-logs">2. View Detailed Logs</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo journalctl -u &lt;service&gt; -xe</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-x</code>: Show extra explanatory information</li>
<li><code>-e</code>: Jump to end of log (newest logs)</li>
</ul>
<h2 id="check-configuration-file-syntax">3. Check Configuration File
Syntax</h2>
<p>Many services provide config file syntax check tools: -
<strong>nginx</strong>: <code>nginx -t</code> - <strong>apache</strong>:
<code>apachectl configtest</code> - <strong>sshd</strong>:
<code>sshd -t</code></p>
<h2 id="check-port-conflicts">4. Check Port Conflicts</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ss -lntp | grep &lt;port&gt;  <span class="comment"># Check if port is occupied</span></span><br><span class="line">sudo lsof -i :&lt;port&gt;         <span class="comment"># See which process is using the port</span></span><br></pre></td></tr></table></figure>
<h2 id="check-file-permissions">5. Check File Permissions</h2>
<p>Service may fail to start due to insufficient permissions:
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l /path/to/config</span><br><span class="line"><span class="built_in">ls</span> -l /var/log/&lt;service&gt;</span><br></pre></td></tr></table></figure></p>
<p>Ensure the user the service runs as (like <code>www-data</code>,
<code>nginx</code>, <code>nobody</code>) has permissions to read/write
related files.</p>
<h2 id="check-selinux-apparmor">6. Check SELinux / AppArmor</h2>
<p>If SELinux (RHEL/CentOS) or AppArmor (Ubuntu/Debian) is enabled, it
may prevent service startup.</p>
<p><strong>Temporarily disable SELinux</strong> (only for
troubleshooting): <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo setenforce 0  <span class="comment"># Set to Permissive mode</span></span><br></pre></td></tr></table></figure></p>
<p><strong>View SELinux logs</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ausearch -m avc -ts recent</span><br></pre></td></tr></table></figure></p>
<p><strong>Temporarily disable AppArmor</strong>: <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop apparmor</span><br></pre></td></tr></table></figure></p>
<h2 id="check-dependencies">7. Check Dependencies</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl list-dependencies &lt;service&gt;</span><br></pre></td></tr></table></figure>
<p>If dependent services haven't started, current service also can't
start.</p>
<hr>
<h1 id="summary-and-further-reading">Summary and Further Reading</h1>
<p>This article covers the core content of systemd service management:
1. ✅ systemd core concepts (unit, dependencies, startup process) 2. ✅
systemctl daily usage (start/stop, auto-start on boot, check status) 3.
✅ Custom services (how to make your program auto-start on boot) 4. ✅
journalctl log management (query, filter, cleanup) 5. ✅ Common service
configuration (time sync, firewall, cron, SSH) 6. ✅ Service
troubleshooting process (what to do when service won't start)</p>
<p><strong>Further Reading</strong>: - systemd official documentation:
https://www.freedesktop.org/wiki/Software/systemd/ - systemd for
Administrators series:
http://0pointer.de/blog/projects/systemd-for-admins-1.html - journalctl
manual: <code>man journalctl</code> - systemd.service manual:
<code>man systemd.service</code></p>
<p><strong>Next Steps</strong>: - <strong>《Linux Package
Management》</strong>: Learn how to install/uninstall/update packages
(apt/yum/dnf/rpm) - <strong>《Linux Process and Resource
Management》</strong>: Learn how to monitor and limit process CPU/memory
usage - <strong>《Linux User Management》</strong>: Learn how to manage
users/groups/permissions</p>
<hr>
<p><strong>By this point, you should have upgraded from "can start/stop
services" to "can write custom services, can troubleshoot, can optimize
startup order." Service management is a core Linux sysadmin skill;
mastering systemd allows you to better manage servers.</strong></p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    
    
    
    
    
    
    <ul>
        <li>Post title：Linux Service Management: systemd, systemctl, and journald Deep Dive</li>
        <li>Post author：Chen Kai</li>
        <li>Create time：2025-01-06 00:00:00</li>
        <li>
            Post link：https://www.chenk.top/en/linux-service-management/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/en/tags/Linux/">#Linux</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/en/tags/Cloud/">#Cloud</a>&nbsp;
                    </li>
                
            </ul>
        

        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/en/linux-pipelines/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Linux Pipelines and Text Processing: Composing Tools into Data Flows</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/en/linux-process-resource-management/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Linux Process and Resource Management: Monitoring, Troubleshooting, and Optimization</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;Comments</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: 'p2Cu9MgjoKzo3VmulhNLIusH-gzGzoHsz',
                    appKey: 'QThQHg3c8sVwGpzg9lu8zEG3',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: '😜 尽情赞美帅气伟大的ck吧~',
                    lang: 'en'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return '博主';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'Chen Kai';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>
              -
            
            2026&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Chen Kai</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
            </div>
        
        <div class="theme-info info-item">
            <!-- Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a> -->
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#systemd-core-concepts-why-use-it-what-problems-does-it-solve"><span class="nav-number">1.</span> <span class="nav-text">systemd
Core Concepts: Why Use It, What Problems Does It Solve</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#why-we-need-a-service-manager"><span class="nav-number">1.1.</span> <span class="nav-text">Why We Need a Service
Manager</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#systemd-vs-sysv-init-legacy-systems"><span class="nav-number">1.2.</span> <span class="nav-text">systemd vs SysV init
(Legacy Systems)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#systemd-core-concept-unit"><span class="nav-number">1.3.</span> <span class="nav-text">systemd Core Concept: unit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#systemd-startup-process-overview"><span class="nav-number">1.4.</span> <span class="nav-text">systemd Startup Process
Overview</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#systemctl-commands-the-muscle-memory-of-daily-use"><span class="nav-number">2.</span> <span class="nav-text">systemctl
Commands: The &quot;Muscle Memory&quot; of Daily Use</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#basic-operations-start-stop-restart-check-status"><span class="nav-number">2.1.</span> <span class="nav-text">Basic
Operations (Start, Stop, Restart, Check Status)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#auto-start-on-boot-management"><span class="nav-number">2.2.</span> <span class="nav-text">Auto-Start on Boot
Management</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#view-service-lists"><span class="nav-number">2.3.</span> <span class="nav-text">View Service Lists</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#view-service-details"><span class="nav-number">2.4.</span> <span class="nav-text">View Service Details</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#custom-services-making-your-programs-auto-start-on-boot"><span class="nav-number">3.</span> <span class="nav-text">Custom
Services: Making Your Programs Auto-Start on Boot</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#minimal-working-example"><span class="nav-number">3.1.</span> <span class="nav-text">Minimal Working Example</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unit-file-explained"><span class="nav-number">3.2.</span> <span class="nav-text">Unit File Explained</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#unit-section-description-and-dependencies"><span class="nav-number">3.2.1.</span> <span class="nav-text">[Unit] Section
(Description and Dependencies)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#service-section-service-startup-method-and-behavior"><span class="nav-number">3.2.2.</span> <span class="nav-text">[Service]
Section (Service Startup Method and Behavior)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#install-section-auto-start-configuration"><span class="nav-number">3.2.3.</span> <span class="nav-text">[Install] Section
(Auto-Start Configuration)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#common-type-differences"><span class="nav-number">3.3.</span> <span class="nav-text">Common Type Differences</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#must-reload-after-modifying-unit-file"><span class="nav-number">3.4.</span> <span class="nav-text">Must Reload After
Modifying Unit File</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#journalctl-systemds-unified-logging-system"><span class="nav-number">4.</span> <span class="nav-text">journalctl:
systemd&#39;s Unified Logging System</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#basic-usage"><span class="nav-number">4.1.</span> <span class="nav-text">Basic Usage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#advanced-usage"><span class="nav-number">4.2.</span> <span class="nav-text">Advanced Usage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#log-persistence"><span class="nav-number">4.3.</span> <span class="nav-text">Log Persistence</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#common-service-configuration-and-troubleshooting"><span class="nav-number">5.</span> <span class="nav-text">Common Service
Configuration and Troubleshooting</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#time-synchronization-service-ntpd-ntpsec-timedatectl"><span class="nav-number">5.1.</span> <span class="nav-text">Time
Synchronization Service (ntpd &#x2F; ntpsec &#x2F; timedatectl)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#why-time-synchronization-is-needed"><span class="nav-number">5.1.1.</span> <span class="nav-text">Why Time Synchronization Is
Needed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#solution-1-using-ntpsec-recommended"><span class="nav-number">5.1.2.</span> <span class="nav-text">Solution 1: Using ntpsec
(Recommended)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#solution-2-using-timedatectl-simpler"><span class="nav-number">5.1.3.</span> <span class="nav-text">Solution 2: Using
timedatectl (Simpler)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ntpdate-one-time-sync-not-recommended-for-resident-use"><span class="nav-number">5.1.4.</span> <span class="nav-text">ntpdate
(One-Time Sync, Not Recommended for Resident Use)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#firewall-service-firewalld"><span class="nav-number">5.2.</span> <span class="nav-text">Firewall Service (firewalld)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#basic-introduction"><span class="nav-number">5.2.1.</span> <span class="nav-text">Basic Introduction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#enable-and-disable"><span class="nav-number">5.2.2.</span> <span class="nav-text">Enable and Disable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#basic-rule-operations"><span class="nav-number">5.2.3.</span> <span class="nav-text">Basic Rule Operations</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#openclose-ports"><span class="nav-number">5.2.3.1.</span> <span class="nav-text">Open&#x2F;Close Ports</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#openclose-services"><span class="nav-number">5.2.3.2.</span> <span class="nav-text">Open&#x2F;Close Services</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zone-concept"><span class="nav-number">5.2.4.</span> <span class="nav-text">zone Concept</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#scheduled-tasks-crontab"><span class="nav-number">5.3.</span> <span class="nav-text">Scheduled Tasks (crontab)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#edit-and-view"><span class="nav-number">5.3.1.</span> <span class="nav-text">Edit and View</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#format"><span class="nav-number">5.3.2.</span> <span class="nav-text">Format</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#examples"><span class="nav-number">5.3.3.</span> <span class="nav-text">Examples</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#view-logs"><span class="nav-number">5.3.4.</span> <span class="nav-text">View Logs</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ssh-service-configuration-and-security-hardening"><span class="nav-number">5.4.</span> <span class="nav-text">SSH Service
Configuration and Security Hardening</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#configuration-file"><span class="nav-number">5.4.1.</span> <span class="nav-text">Configuration File</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#common-configuration-items"><span class="nav-number">5.4.2.</span> <span class="nav-text">Common Configuration Items</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#security-hardening-recommendations"><span class="nav-number">5.4.3.</span> <span class="nav-text">Security Hardening
Recommendations</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#service-troubleshooting-process-what-to-do-when-service-wont-start"><span class="nav-number">6.</span> <span class="nav-text">Service
Troubleshooting Process: What to Do When Service Won&#39;t Start</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#check-service-status"><span class="nav-number">6.1.</span> <span class="nav-text">1. Check Service Status</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#view-detailed-logs"><span class="nav-number">6.2.</span> <span class="nav-text">2. View Detailed Logs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#check-configuration-file-syntax"><span class="nav-number">6.3.</span> <span class="nav-text">3. Check Configuration File
Syntax</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#check-port-conflicts"><span class="nav-number">6.4.</span> <span class="nav-text">4. Check Port Conflicts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#check-file-permissions"><span class="nav-number">6.5.</span> <span class="nav-text">5. Check File Permissions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#check-selinux-apparmor"><span class="nav-number">6.6.</span> <span class="nav-text">6. Check SELinux &#x2F; AppArmor</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#check-dependencies"><span class="nav-number">6.7.</span> <span class="nav-text">7. Check Dependencies</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#summary-and-further-reading"><span class="nav-number">7.</span> <span class="nav-text">Summary and Further Reading</span></a></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>

<script src="/js/lang-switch.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-copy.js"></script>





<div class="post-scripts pjax">
    
        
<script src="/js/left-side-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
