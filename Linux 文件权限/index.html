<!DOCTYPE html>



<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Chen Kai">
    
    <title>
        
            Linux File Permissions (chmod, chown, umask, SUID/SGID/Sticky) |
        
        Chen Kai Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/logo.svg">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"chenk.top","root":"/","language":"en","default_language":"zh-CN","languages":["zh-CN","en","default"],"path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.svg","favicon":"/images/logo.svg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":false},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Chen Kai Blog" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    
    
    
    
    

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/en/">
                Chen Kai Blog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/categories"
                            >
                                CATEGORIES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            
                            
                            <a class=""
                               href="/en/tags"
                            >
                                TAGS
                            </a>
                        </li>
                    
                    <li class="menu-item lang-switch lang-switch-trigger" title="Language">
                        <i class="fas fa-globe"></i>
                    </li>
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item lang-switch-trigger"><i class="fas fa-globe"></i></div>
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/categories">CATEGORIES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    
                    
                    <a class=""
                       href="/en/tags">TAGS</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Linux File Permissions (chmod, chown, umask, SUID/SGID/Sticky)</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.svg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Chen Kai</span>
                        
                            <span class="author-label">CTO</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2025-02-14 00:00:00</span>
        <span class="mobile">2025-02-14 00:00</span>
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Linux/">Linux</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Cloud/">Cloud</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>1.5k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>9 Mins</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <p>Linux permissions are simple on the surface but easy to misuse in
practice: ownership, groups, and ‚Äúothers‚Äù determine who can read, write,
or execute a file (and directory semantics are often the first trap).
This post builds the mental model from the ground up‚Äîhow to read
permission bits, how <code>chmod</code>/<code>chown</code> change
access, and how to apply them safely in real workflows. The goal is that
you can both fix common permission errors quickly and design reasonable
access rules instead of trial-and-error.</p>
<span id="more"></span>
<h1 id="linux-permission-model">1. Linux permission model</h1>
<h2 id="ownership-and-groups">Ownership and groups</h2>
<ul>
<li><strong>Owner (<code>u</code>)</strong>: the user who owns the
file/directory.<br>
</li>
<li><strong>Group (<code>g</code>)</strong>: users can share access via
a common group.<br>
</li>
<li><strong>Others (<code>o</code>)</strong>: everyone else who is
neither the owner nor in the group.</li>
</ul>
<h2 id="permission-bits-rwx">Permission bits (r/w/x)</h2>
<ul>
<li><code>r</code> (read): read file contents; for directories, list
names.<br>
</li>
<li><code>w</code> (write): modify a file; for directories,
create/delete/rename entries.<br>
</li>
<li><code>x</code> (execute): execute a file; for directories,
<code>cd</code> into it and access entries.</li>
</ul>
<p>Example permission string: <code>rwxr-xr-x</code> means: - owner has
<code>rwx</code> (4+2+1=7)<br>
- group has <code>r-x</code> (4+0+1=5)<br>
- others have <code>r-x</code> (4+0+1=5)</p>
<hr>
<h1 id="common-permission-commands">2. Common permission commands</h1>
<h2 id="chmod-octal-and-symbolic">1. <code>chmod</code> (octal and
symbolic)</h2>
<h3 id="octal-notation">Octal notation</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">bit</th>
<th style="text-align: center;">value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">r (read)</td>
<td style="text-align: center;">4</td>
</tr>
<tr>
<td style="text-align: left;">w (write)</td>
<td style="text-align: center;">2</td>
</tr>
<tr>
<td style="text-align: left;">x (execute)</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table>
<p>Combine the three bits to get an octal digit for each of
owner/group/others. For example, <code>754</code> means <code>rwx</code>
/ <code>r-x</code> / <code>r--</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 754 file.sh</span><br></pre></td></tr></table></figure>
<p>This makes the file readable/writable/executable for the owner,
readable/executable for the group, and readable only for others.</p>
<figure>
<img src="/Linux%20%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/image-37.png" alt="Demystifying SUID and SGID bits">
<figcaption aria-hidden="true">Demystifying SUID and SGID
bits</figcaption>
</figure>
<h3 id="symbolic-notation">Symbolic notation</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+w file.txt</span><br><span class="line"><span class="built_in">chmod</span> g-x somefile</span><br><span class="line"><span class="built_in">chmod</span> a+r notes.md</span><br></pre></td></tr></table></figure>
<ul>
<li><code>u/g/o/a</code>: owner / group / others / all.<br>
</li>
<li><code>+ - =</code>: add / remove / set exactly.</li>
</ul>
<h2 id="chown-change-ownership">2. <code>chown</code> (change
ownership)</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> newowner file</span><br><span class="line"><span class="built_in">chown</span> newowner.newgroup file</span><br><span class="line"><span class="built_in">chown</span> .newgroup file</span><br></pre></td></tr></table></figure>
<ul>
<li>Only <code>root</code> (or a privileged user) can run
<code>chown</code> in most cases.<br>
</li>
<li><code>chown</code> can change owner and group in one command (using
<code>.</code> or <code>:</code>), or change only the group.</li>
</ul>
<h2 id="directory-permissions-are-different">3. Directory permissions
are different</h2>
<p>For <strong>directories</strong>: - <code>r</code>: list names
(subject to execute permission).<br>
- <code>w</code>: create/delete/rename entries (subject to execute
permission).<br>
- <code>x</code>: enter the directory (<code>cd</code>) and access
entries.</p>
<h2 id="umask-default-permission-mask">4. <code>umask</code> (default
permission mask)</h2>
<p><code>umask</code> (User File Creation Mask) controls the default
permissions for newly created files and directories by masking out
bits.</p>
<figure>
<img src="/Linux%20%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/Users_Groups-Umask_Example.png" alt="Umask">
<figcaption aria-hidden="true">Umask</figcaption>
</figure>
<p><strong>How to compute it</strong></p>
<ol type="1">
<li><strong>Base defaults</strong>:
<ol type="1">
<li>files: 666 (<code>rw-rw-rw-</code>, no execute bit by default)<br>
</li>
<li>directories: 777 (<code>rwxrwxrwx</code>)</li>
</ol></li>
<li><strong>Effective permissions</strong>:
<ul>
<li>effective = base default minus the umask bits</li>
</ul></li>
</ol>
<p>Example: if <code>umask</code> is 022, then new files (base 666)
become:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">666 - 022 = 644 Ôºàrw-r--r--Ôºâ</span><br></pre></td></tr></table></figure>
<p>For directories (base 777), you get:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">777 - 022 = 755 Ôºàrwxr-xr-xÔºâ</span><br></pre></td></tr></table></figure>
<p><strong>View and set</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">umask</span></span><br></pre></td></tr></table></figure>
<p><strong>Set a new umask</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">umask</span> 027</span><br></pre></td></tr></table></figure>
<p>With <code>umask 027</code>, new files become 640 and new directories
become 750.</p>
<p><strong>Make it persistent</strong></p>
<p>Add it to your shell config (e.g. <code>~/.bashrc</code> or
<code>~/.zshrc</code>):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">umask</span> 027</span><br></pre></td></tr></table></figure>
<p><strong>Common umask values</strong></p>
<ul>
<li>022: files 644, directories 755 (common default; prevents others
from writing).<br>
</li>
<li>027: files 640, directories 750 (stricter; good for production
servers).<br>
</li>
<li>002: files 664, directories 775 (shared group environments; common
in dev teams).</li>
</ul>
<h2 id="chattr-change-file-attributes">5. <code>chattr</code> (change
file attributes)</h2>
<p><code>chattr</code> changes extra file attributes on Linux (mostly on
ext2/3/4). These attributes can enforce behaviors such as ‚Äúimmutable‚Äù
(cannot be modified/deleted) or ‚Äúappend-only‚Äù (useful for logs). Use
<code>lsattr</code> to view current attributes.</p>
<p><strong>Common use cases</strong></p>
<ol type="1">
<li><strong>Protect critical files from accidental
edits/deletes</strong>.<br>
</li>
<li><strong>Force append-only writes for log files</strong>.<br>
</li>
<li><strong>Reduce the risk of accidental overwrites</strong> (depends
on attribute and workflow).</li>
</ol>
<p><strong>Syntax</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chattr [options] [+/-/=][attr] &lt;file-or-dir&gt;</span><br></pre></td></tr></table></figure>
<p><strong>Common attributes</strong></p>
<table>
<thead>
<tr>
<th style="text-align: left;">attribute</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">a</td>
<td>append-only</td>
</tr>
<tr>
<td style="text-align: left;">i</td>
<td>immutable (cannot be modified or deleted)</td>
</tr>
<tr>
<td style="text-align: left;">d</td>
<td>excluded from <code>dump</code> backups</td>
</tr>
<tr>
<td style="text-align: left;">e</td>
<td>extents format (default on many ext filesystems)</td>
</tr>
<tr>
<td style="text-align: left;">s</td>
<td>secure deletion (zero-fill on delete; not always supported)</td>
</tr>
<tr>
<td style="text-align: left;">u</td>
<td>undelete information kept (not always supported)</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong></p>
<ol type="1">
<li><p><strong>Prevent a file from being modified or
deleted</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo chattr +i example.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Protect important system files from accidental edits:</span></span><br><span class="line">sudo chattr +i /etc/fstab</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Make a log file append-only</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo chattr +a logfile.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Prevent logs from being overwritten or truncated:</span></span><br><span class="line">sudo chattr +a /var/log/syslog</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Exclude from <code>dump</code> backups</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chattr +d myfolder</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>Notes</strong></p>
<ol type="1">
<li><strong>Privileges</strong>: you typically need <code>sudo</code> to
change attributes.<br>
</li>
<li><strong>Filesystem support</strong>: mainly ext2/ext3/ext4; other
filesystems may not support these flags.<br>
</li>
<li><strong>Be careful</strong>: <code>+i</code> blocks edits and
deletion; make sure you can revert it when needed.</li>
</ol>
<h2 id="lsattr-view-attributes">6. <code>lsattr</code> (view
attributes)</h2>
<table>
<thead>
<tr>
<th>option</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>include hidden files</td>
</tr>
<tr>
<td>-d</td>
<td>list the directory itself, not its contents</td>
</tr>
<tr>
<td>-R</td>
<td>recurse into subdirectories</td>
</tr>
<tr>
<td>-v</td>
<td>show version (rarely used)</td>
</tr>
</tbody>
</table>
<p>In <code>lsattr</code> output, each file/dir shows a string of
attribute flags (commonly 10 characters), e.g.:</p>
<figure>
<img src="/Linux%20%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/image-20250127005208300.png" alt="image-20250127005208300">
<figcaption aria-hidden="true">image-20250127005208300</figcaption>
</figure>
<h1 id="advanced-special-bits-suid-sgid-sticky">3. Advanced: special
bits (SUID / SGID / Sticky)</h1>
<p>Special bits extend the standard <code>rwx</code> model for
executables and directories. This section covers <strong>SUID</strong>,
<strong>SGID</strong>, and the <strong>sticky bit</strong>: what they
do, how to set them, and why they can be risky.</p>
<figure>
<img src="/Linux%20%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/FcTez6NWQAYxkr7.jpeg" alt="Linux File Permissions are not only about R+W+X, it&#39;s also about SUID, SGID, and sticky bit">
<figcaption aria-hidden="true">Linux File Permissions are not only about
R+W+X, it's also about SUID, SGID, and sticky bit</figcaption>
</figure>
<h2 id="suid-set-user-id">1. SUID (Set User ID)</h2>
<h3 id="how-it-works">1.1 How it works</h3>
<p>When an executable has the SUID bit set, running it will give the
process an <strong>effective UID equal to the file owner</strong>,
rather than the caller. A classic example is
<code>/usr/bin/passwd</code>: it is owned by <code>root</code>, and SUID
allows normal users to update their own password (which requires writing
to <code>/etc/shadow</code>) without granting them full root access.</p>
<figure>
<img src="/Linux%20%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/image-20250126231517290.png" alt="image-20250126231517290">
<figcaption aria-hidden="true">image-20250126231517290</figcaption>
</figure>
<p><strong>Why this exists</strong>: it allows a tightly scoped program
to perform privileged actions safely, without giving the user a root
shell.</p>
<h3 id="view-and-set">1.2 View and set</h3>
<p>In <code>ls -l</code>, when SUID is set, the owner execute bit shows
<code>s</code> instead of <code>x</code>, e.g.
<code>-rwsr-xr-x</code>.</p>
<ul>
<li><p><strong>Set SUID</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+s myprog</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Remove SUID</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u-s myprog</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Octal form</strong>: add <code>4</code> in front of the
usual mode, e.g. <code>chmod 4755 file</code> ‚Üí
<code>rwsr-xr-x</code>.</p></li>
</ul>
<h3 id="minimal-demo">1.3 Minimal demo</h3>
<p>Write a simple C program <code>myprog.c</code>:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;Real UID=%d, Effective UID=%d\n&quot;</span>, getuid(), geteuid());</span><br><span class="line">  system(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol type="1">
<li><p>Compile:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -o myprog myprog.c</span><br></pre></td></tr></table></figure></li>
<li><p>Make it owned by root and set SUID:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chown</span> root myprog</span><br><span class="line">sudo <span class="built_in">chmod</span> 4755 myprog</span><br></pre></td></tr></table></figure></li>
<li><p>Run as a normal user:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./myprog</span><br></pre></td></tr></table></figure></li>
</ol>
<p>You‚Äôll see <code>Real UID</code> as the normal user, but
<code>Effective UID</code> becomes <code>0</code> (root), so
<code>system(\"id\")</code> runs with root privileges.</p>
<figure>
<img src="/Linux%20%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/image-20250126231949945.png" alt="image-20250126231949945">
<figcaption aria-hidden="true">image-20250126231949945</figcaption>
</figure>
<h3 id="security-notes">1.4 Security notes</h3>
<ul>
<li>A vulnerable SUID program can be exploited for privilege
escalation.<br>
</li>
<li>Avoid setting SUID on untrusted or unnecessary binaries.<br>
</li>
<li>Audit and minimize SUID binaries regularly (e.g.
<code>find / -perm -4000</code>) to reduce risk.</li>
</ul>
<h2 id="sgid-set-group-id">2. SGID (Set Group ID)</h2>
<h3 id="when-to-use-sgid">2.1 When to use SGID</h3>
<ol type="1">
<li><strong>Executables</strong>: the process runs with an effective GID
equal to the file‚Äôs group.<br>
</li>
<li><strong>Directories (more common)</strong>: new files/subdirectories
inherit the directory‚Äôs group (instead of the creator‚Äôs default group),
which is ideal for shared project directories.</li>
</ol>
<h3 id="view-and-set-1">2.2 View and set</h3>
<ul>
<li>In <code>ls -l</code>, SGID shows as <code>s</code> on the group
execute bit (e.g. <code>rwxr-sr-x</code>).<br>
</li>
<li>Set it with <code>chmod g+s shared_dir</code>, or via octal
<code>chmod 2775 shared_dir</code>.</li>
</ul>
<h3 id="example-shared-project-directory">2.3 Example: shared project
directory</h3>
<p>Suppose <code>/home/project/</code> should be writable by a team, and
new files should inherit group <code>dev</code>:</p>
<ol type="1">
<li><p>Create the directory and set its group to <code>dev</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /home/project</span><br><span class="line"><span class="built_in">chown</span> :dev /home/project</span><br></pre></td></tr></table></figure></li>
<li><p>Set SGID:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> g+s /home/project</span><br></pre></td></tr></table></figure></li>
</ol>
<p>Make sure users are members of <code>dev</code>. Then new files
created under the directory will default to group <code>dev</code>,
which enables clean group-based sharing.</p>
<h2 id="sticky-bit">3. Sticky bit</h2>
<h3 id="what-it-does">3.1 What it does</h3>
<p>The sticky bit is most common on world-writable directories such as
<code>/tmp</code>. When set on a directory, files inside can only be
deleted/renamed by the file owner or <code>root</code>, even if other
users have write access to the directory. This prevents users from
deleting each other‚Äôs files.</p>
<h3 id="how-to-set-it">3.2 How to set it</h3>
<ul>
<li><code>chmod o+t dirname</code></li>
<li>Or via octal: <code>chmod 1777 /tmp</code> ‚Üí
<code>rwxrwxrwt</code>.</li>
</ul>
<h3 id="tmp-example">3.3 <code>/tmp</code> example</h3>
<p><code>ls -ld /tmp</code> commonly shows
<code>drwxrwxrwt</code>.<br>
- Everyone can write to <code>/tmp</code>, but the trailing
<code>t</code> means only the file owner can delete their own files.</p>
<hr>
<h1 id="putting-it-together">4. Putting it together</h1>
<h2 id="combining-special-bits-in-octal">1. Combining special bits in
octal</h2>
<p>If an executable needs SUID + 755, then: - SUID = 4<br>
- base mode = 755<br>
- combined = 4755</p>
<p>Similarly, a directory with SGID + <code>rwxrwsr-x</code> is
2775:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 2775 some_dir</span><br></pre></td></tr></table></figure>
<h2 id="audit-suid-binaries">2. Audit SUID binaries</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -4000 2&gt;/dev/null</span><br></pre></td></tr></table></figure>
<ul>
<li>Regular audits reduce the attack surface by identifying unnecessary
SUID programs.</li>
</ul>
<h2 id="security-summary">3. Security summary</h2>
<ul>
<li><strong>SUID</strong>: common on critical programs like
<code>passwd</code>, <code>sudo</code>, <code>mount</code>,
<code>umount</code>; manage carefully.<br>
</li>
<li><strong>SGID</strong>: great for shared directories.<br>
</li>
<li><strong>Sticky</strong>: prevents file deletion by others in
world-writable directories.</li>
</ul>
<hr>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post titleÔºöLinux File Permissions (chmod, chown, umask, SUID/SGID/Sticky)</li>
        <li>Post authorÔºöChen Kai</li>
        <li>Create timeÔºö2025-02-14 00:00:00</li>
        <li>
            Post linkÔºöhttps://www.chenk.top/Linux Êñá‰ª∂ÊùÉÈôê/
        </li>
        <li>
            Copyright NoticeÔºöAll articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/Linux/">#Linux</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/tags/Cloud/">#Cloud</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/Linux-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Linux Êñá‰ª∂ÊùÉÈôê</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/Linux-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Linux Áî®Êà∑ÁÆ°ÁêÜ</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;Comments</i>
    </div>
    

        
            
    <div class="valine-container">
        <script data-pjax
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script data-pjax>
            function loadValine() {
                new Valine({
                    el: '#vcomments',
                    appId: 'p2Cu9MgjoKzo3VmulhNLIusH-gzGzoHsz',
                    appKey: 'QThQHg3c8sVwGpzg9lu8zEG3',
                    meta: ['nick', 'mail', 'link'],
                    avatar: 'wavatar',
                    enableQQ: true,
                    placeholder: 'üòú Â∞ΩÊÉÖËµûÁæéÂ∏ÖÊ∞î‰ºüÂ§ßÁöÑckÂêß~',
                    lang: 'en'.toLowerCase()
                });

                function getAuthor(language) {
                    switch (language) {
                        case 'en':
                            return 'Author';
                        case 'zh-CN':
                            return 'Âçö‰∏ª';
                        default:
                            return 'Master';
                    }
                }

                // Add "Author" identify
                const getValineDomTimer = setInterval(() => {
                    const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
                    if (vcards.length > 0) {
                        let author = 'Chen Kai';

                        if (author) {
                            for (let vcard of vcards) {
                                const vnick_dom = vcard.querySelector('.vhead .vnick');
                                const vnick = vnick_dom.innerHTML;
                                if (vnick === author) {
                                    vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                                }
                            }
                        }
                        clearInterval(getValineDomTimer);
                    } else {
                        clearInterval(getValineDomTimer);
                    }
                }, 2000);
            }

            if ('true') {
                const loadValineTimeout = setTimeout(() => {
                    loadValine();
                    clearTimeout(loadValineTimeout);
                }, 1000);
            } else {
                window.addEventListener('DOMContentLoaded', loadValine);
            }
        </script>
    </div>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>
              -
            
            2026&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Chen Kai</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
            </div>
        
        <div class="theme-info info-item">
            <!-- Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a> -->
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        
            <li class="tools-item rss flex-center">
                <a class="flex-center"
                   href="/atom.xml"
                   target="_blank"
                >
                    <i class="fas fa-rss"></i>
                </a>
            </li>
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#linux-permission-model"><span class="nav-number">1.</span> <span class="nav-text">1. Linux permission model</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ownership-and-groups"><span class="nav-number">1.1.</span> <span class="nav-text">Ownership and groups</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#permission-bits-rwx"><span class="nav-number">1.2.</span> <span class="nav-text">Permission bits (r&#x2F;w&#x2F;x)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#common-permission-commands"><span class="nav-number">2.</span> <span class="nav-text">2. Common permission commands</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#chmod-octal-and-symbolic"><span class="nav-number">2.1.</span> <span class="nav-text">1. chmod (octal and
symbolic)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#octal-notation"><span class="nav-number">2.1.1.</span> <span class="nav-text">Octal notation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#symbolic-notation"><span class="nav-number">2.1.2.</span> <span class="nav-text">Symbolic notation</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chown-change-ownership"><span class="nav-number">2.2.</span> <span class="nav-text">2. chown (change
ownership)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#directory-permissions-are-different"><span class="nav-number">2.3.</span> <span class="nav-text">3. Directory permissions
are different</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#umask-default-permission-mask"><span class="nav-number">2.4.</span> <span class="nav-text">4. umask (default
permission mask)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chattr-change-file-attributes"><span class="nav-number">2.5.</span> <span class="nav-text">5. chattr (change
file attributes)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lsattr-view-attributes"><span class="nav-number">2.6.</span> <span class="nav-text">6. lsattr (view
attributes)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#advanced-special-bits-suid-sgid-sticky"><span class="nav-number">3.</span> <span class="nav-text">3. Advanced: special
bits (SUID &#x2F; SGID &#x2F; Sticky)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#suid-set-user-id"><span class="nav-number">3.1.</span> <span class="nav-text">1. SUID (Set User ID)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#how-it-works"><span class="nav-number">3.1.1.</span> <span class="nav-text">1.1 How it works</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#view-and-set"><span class="nav-number">3.1.2.</span> <span class="nav-text">1.2 View and set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#minimal-demo"><span class="nav-number">3.1.3.</span> <span class="nav-text">1.3 Minimal demo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#security-notes"><span class="nav-number">3.1.4.</span> <span class="nav-text">1.4 Security notes</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sgid-set-group-id"><span class="nav-number">3.2.</span> <span class="nav-text">2. SGID (Set Group ID)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#when-to-use-sgid"><span class="nav-number">3.2.1.</span> <span class="nav-text">2.1 When to use SGID</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#view-and-set-1"><span class="nav-number">3.2.2.</span> <span class="nav-text">2.2 View and set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#example-shared-project-directory"><span class="nav-number">3.2.3.</span> <span class="nav-text">2.3 Example: shared project
directory</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sticky-bit"><span class="nav-number">3.3.</span> <span class="nav-text">3. Sticky bit</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#what-it-does"><span class="nav-number">3.3.1.</span> <span class="nav-text">3.1 What it does</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#how-to-set-it"><span class="nav-number">3.3.2.</span> <span class="nav-text">3.2 How to set it</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tmp-example"><span class="nav-number">3.3.3.</span> <span class="nav-text">3.3 &#x2F;tmp example</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#putting-it-together"><span class="nav-number">4.</span> <span class="nav-text">4. Putting it together</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#combining-special-bits-in-octal"><span class="nav-number">4.1.</span> <span class="nav-text">1. Combining special bits in
octal</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#audit-suid-binaries"><span class="nav-number">4.2.</span> <span class="nav-text">2. Audit SUID binaries</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#security-summary"><span class="nav-number">4.3.</span> <span class="nav-text">3. Security summary</span></a></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>

<script src="/js/lang-switch.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-copy.js"></script>





<div class="post-scripts pjax">
    
        
<script src="/js/left-side-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
